var structureJS="undefined"!=typeof structureJS?structureJS:{options:{download_minified:!1,minified_output_tag_id:"minified",log_priority:3,preProcess:!0,minify:!0},state:{dependencyTree:{},resolvedFileList:[],pmiFileOrder:[],declaredGroups:[],groupsInTLC:{},pmiFilesSelectedForExport:"",modules:{},cache:{structureJSTag:null},doneQueue:[]},decodeInfoObj:function(e){var t={name:""};if("string"==typeof e)t.name=e;else if("object"==typeof e){if("undefined"==typeof e.name)throw"Configuration Object Must Have Name Property";this.extend(t,e)}return t},module:function(e,t){function n(e){var t=null;return r.state.modules[e]&&(t=r.state.modules[e].module),t}if("undefined"==typeof e||"string"!=typeof e&&"object"!=typeof e)throw"Module Must Have Configuration Object Or Name String";if("undefined"==typeof t||"function"!=typeof t)throw"Module Must Have A Function As It's Definition";var r=this,i=null,a={type:"unknown"},o=null;if(i=this.decodeInfoObj(e),"undefined"!=typeof i.global_dependencies){if(o=i.global_dependencies,!Array.isArray(o))throw"ERROR: global_dependencies Property Of "+i.name+"s Configuration Object Must Be An Array.";for(var l=0;l<o.length;l++)if("undefined"==typeof window[o[l]])throw"ERROR: "+i.name+" Requires "+o[l]+" To Be In Global Namespace."}n.amd=n,n.getType=function(){var e=null;return r.state.modules[depName]&&(e=r.state.modules[depName].type),e},n._class=n,structureJS.require=n,a.module=t.call(structureJS.config.context,n),this.state.modules[i.name]=a},moduleAMD:function(e,t){var n={type:"amd",name:e};if(n.module=t.call(null).call(null),"undefined"==typeof n.module)throw"Module Function Definition Must Return Something";this.state.modules[e]=n},declare:function(e,t){if("string"!=typeof e)throw"Parameter 'name' must be a string.";"undefined"!=typeof t&&Array.isArray(t)||(t=[]),this.state.dependencyTree[e]=t},declareGroup:function(e){var t=this,n=this.decodeInfoObj(e);this.state.declaredGroups.push(n.name),this.declare(n.name),this[n.name]={};var r=this[n.name];r.state={dependencyTree:{},declaredGroups:[]},r.declare=function(e,n){t.declare.apply(r,[e,n])}},cache:function(e,t){var n=null;return 1==arguments.length&&this.state.cache[e]&&(n=this.state.cache[e]),2==arguments.length&&e&&t&&(this.state.cache[e]=t),n},setContext:function(e){this.config.context=e},extendContext:function(e){this.extend(this.config.context,e)},circular:function(e){if("undefined"==typeof e)return this.circular;var t=structureJS.state.modules[e],n=t.module;return n}};!function(){window.define=function(){},window.define.amd={jQuery:!0},window.console&&0!=structureJS.options.log||(window.console={log:function(){},logf:function(){}})}();structureJS.module("Constants",function(){_={},_.MODEL_ATTRIB_KEY="aplAttrib",_.MODEL_ATTRIB_REPEAT_KEY="aplRepeat",_.TARGET_ATTRIB_KEY="aplTarget",_.CTRL_KEY="aplControl",_.CTRL_ATTRIB_STRING="data-apl-control",_.IE_MODEL_ATTRIB_KEY="apl-attrib",_.IE_MODEL_REPEAT_KEY="apl-repeat",_.IE_TARGET_ATTRIB_KEY="apl-target",_.IE_CTRL_ATTRIB_KEY="apl-control",_.IE_DEFAULT_ATTRIB_KEY="apl-default",_.MAIN_CONTENT_ID="apl-content",_.CLASS_SEPARATOR=/,|\s/,_.NT_REGEX=/\w\:\w/,_.RX_TOKEN=/\{\{(\w+\.\w+)(.*)*/,_.RX_ALL_INX=/(\{\{(\w+\.\w+)([^}]*)*\}\})+?/g,_.RX_M_ATTR=/\{\{(\w+)\.(\w+)([^}]*)*/g,_.RX_M_ATTR_TOK=/\{\{(\w+)\.([\w\d_\-\.\[\]]+)\}\}+?/gm,_.RX_IDX_ITER=/\[(\w+|\d+)\]|\.(\w+)/g,_.RX_ANNOT=/%(\w+)%([^%]+)%\/(?:\w+)%/g,_.RX_RPT_M_ATTR=/(\w+\.\w+)(.*)*/g,_.RX_RPT_ALL_INX=/((\w+\.\w+)([^}]*)*)/g,_.RX_RPT_SPC_SYM=/\{\{(\$*\w+)*\}\}/g,_.TEXT_NODE=3,_.ELEMENT_NODE=1,_.UNINDEXED=-1,_.NON_TERMINAL=0,_.TERMINAL=1,_.STACK=0,_.QUEUE=1,_.COMPILE_ME=1,_.NO_COMPILE_ME=0,_.RECOMPILE_ME=-1,_.SYSTEM_EVENT_TYPES={system:"TMP_SYSTEM",interpolation_done:"interp_done",link_done:"interp_done",repeat_built:"repeat_built",framework_loaded:"fw_loaded",LIST_TYPE:_.QUEUE},_.MODEL_EVENT_TYPES={interp_change:"i_change",select_change:"s_change",checkbox_change:"cb_change"},_.RESTRICTED="RESTRICTED",_.DOM_MDL_NAME="model",_.DOM_ATTR_NAME="attrib",_.DOM_TOKEN="token",structureJS.extendContext(_)});structureJS.module("Util",function(){return _=Object.create(null),_.isDef=function(e){return"undefined"!=typeof e},_.isString=function(e){return _.isDef(e)&&"string"==typeof e},_.isFunc=function(e){return _.isDef(e)&&"function"==typeof e},_.isNull=function(e){return!_.isDef(e)||null==e},_.isObject=function(e){return _.isDef(e)&&Object.keys(e).length>0},_.isNullOrEmpty=function(e){return!_.isDef(e)||null===e||""===e},_.isArray=function(e){return!_.isNull(e)&&Array.isArray(e)},_.log=function(e){console.log(e)},_.isInt=function(e){return _.isDef(e)&&/^-?[0-9]+$/.test(e)},_.isObj=function(e){return null===e||"undefined"==typeof e?!1:"function"==typeof e||"object"==typeof e},_.isTrue=function(e){return _.isDef(e)&&e===!0},_.isFalse=function(e){return _.isDef(e)&&e===!1},_.Default=function(e,t){return _.isDef(e)?e:t},_.mixin=function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},_.length=function(e){return retVal=0,_.isObj(e)&&(retVal=Object.keys(e).length),retVal},structureJS.extendContext(_),_});structureJS.module("TMP_Node",function(){var e=this,t=function(n,r,i,a){return this instanceof t?(this.node=n,this.modelName=r,this.attribName=i,this.index=e.isDef(a)?a:-1,this.symbolMap=Object.create(null),this.hasNonTerminals=!1,this.embeddedModelAttribs={},this.embeddedRepeats={},this.scope="",this.hasAttributes=!1,this.repeatModelName="",this.repeatAttribName="",this.repeatIndex=e.UNINDEXED,this.isComponent=!1,this.componentName="",this.indexQueue=[],void(this.token={})):new t(n,id,r,i,a)};return t.prototype.inheritToken=function(e){this.modelName=e.modelName,this.attribName=e.attribName,this.repeatModelName=e.repeatModelName,this.repeatAttribName=e.repeatAttribName,this.repeatIndex=e.repeatIndex,this.indexQueue=e.indexQueue.slice(0)},t});structureJS.module("ModelHeader",function(){var e=this,t=structureJS.circular(),n=function(r,i){if(!(this instanceof n))return new n(i);this.modelName=r;for(var a in i)i.hasOwnProperty(a)&&(t("Map").annotateWithLimitProps(this,a,i[a]),Object.defineProperty(this,a,{set:function(n,r){return function(i){e.log("SET FIRED for "+r.modelName+"."+n),e.isDef(r.filterResults[n])&&delete r.filterResults[n],e.isDef(r.cachedResults[n])&&delete r.cachedResults[n],t("Map").annotateWithLimitProps(r,n,i),t("Map").setAttribute(r.modelName,n,i),t("Interpolate").interpolate(r.modelName,n,i)}}(a,this),get:function(e,t){return function(){return t.attributes[e]}}(a,this)}));this.attributes=i,this.cachedResults=Object.create(null),this.filterResults=Object.create(null),this.limitTable=Object.create(null),this.liveFilters=Object.create(null)};return n});structureJS.module("Attribute",function(){var e=this,t=function(e){return this instanceof t?(this.onCreate=function(){},this.onChange=function(){},void(this.name=e||"")):new t},n=function(t){var n=!1;return e.isString(t)&&(n=e.isDef(Templar._attributes[t])),n};return t.prototype.getAttribute=function(e){var t=null;return n(e)&&(t=Templar._attributes[e]),t},t});structureJS.module("Component",function(){var e=function(t,n,r){return this instanceof e?(this.attributes=t||Object.create(null),this.onCreate=n||function(){},this.templateURL=r||"",this.templateContent="",this.templateStyle=null,void(this.transclude=!1)):new e};return e});structureJS.module("Token",function(){var e=this,t=function(n,r){return this instanceof t?(this.start="",this.end="",this.fullToken="",this.modelName=n||"",this.attribName=r||"",this.repeatModelName="",this.repeatAttribName="",this.repeatIndex=e.UNINDEXED,void(this.indexQueue=[])):new t(n,r)};return t});structureJS.module("State",function(){return{preventUpdate:!1,target:"",aplHideList:"",compilationThreadCount:0,onloadFileQueue:[],hasDeclaredRoutes:!1,compiledScopes:"",ignoreHashChange:!1,ignoreKeyUp:!1,dispatchListeners:!0,blockBodyCompilation:!1}});structureJS.module("DOM",function(e){var t=structureJS.circular(),n=e("State"),i=this;return{modifyClasses:function(e,t,n){var r="",a=n.split(i.CLASS_SEPARATOR);if(!i.isNull(e)){r=e.getAttribute("class"),r=i.isNull(r)?"":r.trim();for(var o=0;o<a.length;o++)r=r.replace(a[o],"","g");e.setAttribute("class",r+" "+t)}},hideByIdList:function(e){var t=null,n=null;if(null!=e&&""!=e){n=e.split(i.CLASS_SEPARATOR);for(var r=0;r<n.length;r++)t=document.getElementById(n[r]),this.modifyClasses(t,"apl-hide","apl-show,apl-hide")}},appendTo:function(e,t){i.isDef(t)&&i.isDef(e)&&!i.isNull(t.parentNode)&&t.parentNode.insertBefore(e,e.nextSibling)},cloneAttributes:function(e,t,n){var r,n=i.isDef(n)?!0:!1;if(e.hasAttributes()){attributes=e.attributes;for(var a=0;a<attributes.length;a++)"data-apl-repeat"!=attributes[a].name&&"style"!=attributes[a].name&&(0==n?t.setAttribute(attributes[a].name,attributes[a].value):(r=i.isNullOrEmpty(r=t.getAttribute(attributes[a].name))?"":r+" ",t.setAttribute(attributes[a].name,r+attributes[a].value)))}},isVisible:function(e){return i.isNull(e)?!1:e.offsetWidth>0||e.offsetHeight>0},asynGetPartial:function(e,t,r,a){var o=new XMLHttpRequest;o.onload=t,o.fileName=e,o.targetId=r,o.targetNode=a,o.onreadystatechange=function(){4===o.readyState&&(n.compilationThreadCount--,404===o.status&&i.log('WARNING(404): FILE "'+o.fileName+'" NOT FOUND'))},i.isNullOrEmpty(o.fileName)||(n.compilationThreadCount++,o.open("get",e,!0),o.send())},fetchNestedRouteFiles:function(e,r){var a=new XMLHttpRequest,o=null;null!=(o=e.shift())&&(a.onload=t("Bootstrap").loadPartialIntoTemplate,a.fileName=o.partial,a.targetId=o.target,a.route=o.route,a.fallback=o.fallback||"",a.callbackOnComplete=e.onComplete||function(){},a.callbackParam1=e.slice(0),a.callbackParam1.onComplete=e.onComplete,a.callback=function(){0==this.callbackParam1.length?(this.callbackOnComplete.call(null),this.fileName=r):t("DOM").fetchNestedRouteFiles.call(null,this.callbackParam1,r)},a.onreadystatechange=function(){4===a.readyState&&(n.compilationThreadCount--,404===a.status&&(i.log('WARNING(404): FILE "'+a.fileName+'" NOT FOUND'),i.isNullOrEmpty(a.fallback)||(i.log('WARNING (404): ATTEMPTING FALLBACK ROUTE "'+a.fallback+'".'),t("Route").open(a.fallback))))},i.isNullOrEmpty(a.fileName)||(n.compilationThreadCount++,i.log("FETCHIGN: "+a.fileName),a.open("get",a.fileName,!0),a.send()))},buildOnloadList:function(e){var t=[];return i.isArray(e)&&e.forEach(function(e){i.isObj(e)?t.unshift(e.partial):(t.unshift(e),n.onloadFileQueue.unshift(e))}),t.join(",")},asynFetchRoutes:function(e,r){n.onloadFileQueue.length=0;var a=[],o=(e.route,"");a.onComplete=r||function(){},i.isArray(e.partial)?(o=this.buildOnloadList([e.route].concat(e.partial)),t("Route").deferenceNestedRoutes(e.partial,a)):(o=e.route+","+e.partial,n.onloadFileQueue.unshift(e.route),a.push(e)),this.fetchNestedRouteFiles(a,o)},insertAfter:function(e,t){var n=t.nextSibling,i=t.parentNode;return n?i.insertBefore(e,n):i.appendChild(e),e},splitText:function(e,t){var n=e.cloneNode(!1);return n.deleteData(0,t),e.deleteData(t,e.length-t),this.insertAfter(n,e),n},getHashValue:function(e){return i.isString(e)?e.substring(e.indexOf("#")).replace("#",""):""},getDataAttribute:function(e,t){var n=i.isString(t)?t.split("-"):[],r=null,a=n.slice(0,1).concat(n.slice(1).map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("");return i.isNull(e)||(r=i.isDef(e.dataset)?e.dataset[a]:e.getAttribute("data-"+t)),i.isNull(r)?"":r},annotateDOMNode:function(e,t,n,r){e[i.DOM_MDL_NAME]=t||"",e[i.DOM_ATTR_NAME]=n||"",e[i.DOM_TOKEN]=r||e[i.DOM_TOKEN]||null},getDOMAnnotations:function(e){return{modelName:e[i.DOM_MDL_NAME],attribName:e[i.DOM_ATTR_NAME],token:e[i.DOM_TOKEN]}}}});structureJS.module("Map",function(e){var t=this,n=(e("DOM"),Object.create(null)),i=(Object.create(null),Object.create(null));i[t.SYSTEM_EVENT_TYPES.system]=Object.create(null),i[t.SYSTEM_EVENT_TYPES.system].listeners=Object.create(null);var r=e("TMP_Node");return{buildAttribAlias:function(e){return"_"+e},getRepeatBaseNodes:function(e,i){var r=[];return t.isDef(i)&&t.isDef(e)&&t.isDef(n[e])&&t.isDef(n[e][i])&&(r=n[e][i]),r},pruneBaseNodes:function(e){for(var n=0;n<e.length;n++)(t.isNull(e[n].node.parentNode)||!document.body.contains(e[n].node))&&(e.splice(n,1),n--)},isRepeatedAttribute:function(e,t){return this.getRepeatBaseNodes(e,t).length>0},addRepeatBaseNode:function(e){t.isDef(n[e.modelName])||(n[e.modelName]=Object.create(null)),t.isDef(n[e.modelName][e.attribName])||(n[e.modelName][e.attribName]=[]),n[e.modelName][e.attribName].push(e)},exists:function(e){return t.isDef(i[e])},contains:function(e,n){if(!t.isArray(e))return!1;for(var i=!1,r=0;r<e.length;r++)if(e[r]===n){i=!0;break}return i},isInScopeList:function(e,n,i){var r=null,a=t.isDef(e)?e.split(" "):[],n=t.isDef(n)?n.split(","):[],i=t.isDef(i)?i:!1;if(inScope=!1,n.length>0){a=a.length>1?a:[null,null],r=n.map(function(e){var t=e.split(" ");return t.length>1?t:[null,null]});for(var o=0;o<r.length;o++)if(!t.isNullOrEmpty(a[0])&&!t.isNullOrEmpty(r[o][0])&&a[0]==r[o][0]){inScope=1==i?!0&&a[1]==r[o][1]:!0;break}}return inScope},forEach:function(e,n,r){var a=null,o=Object.create(null);if(o.endingIndex=0,o.modelName="",o.modelAtrribName="",o.hasAttributes=!1,o.stop=!1,o.target=null,o.targetCopy=null,o.key="",o.length=0,o.index=0,o.modelAttribIndex=0,o.modelAttribLength=0,o.removeItem=function(e){o.target.splice(e,1),o.index--},t.isFunc(e)){r=e,a=i;for(var l in a)r.call(null,{modelName:l},l)}else if(!t.isFunc(e)&&t.isFunc(n)){r=n;a=t.isDef(i[e])&&t.isDef(i[e].nodeTable)?i[e].nodeTable:Object.create(null);for(var l in a)o.modelName=e,o.modelAtrribName=l,r.call(null,o,l)}else if(!t.isFunc(e)&&!t.isFunc(n)&&t.isFunc(r)){var s=null,u={};if(t.isDef(i[e].nodeTable[n]))for(o.target=i[e].nodeTable[n].nodes,o.endingIndex=o.target.length;o.index<o.target.length&&o.index<o.endingIndex;o.index++,u={}){s=o.target[o.index];for(var c=0;c<o.target.length;c++)o.target[c].index>t.UNINDEXED&&s.scope==o.target[c].scope&&(u[o.target[c].index]=!0);o.modelAttribLength=Object.keys(u).length,o.modelName=e,o.modelAtrribName=n,o.modelAttribIndex=s.index,o.key=l,o.hasAttributes=Object.keys(o.target[o.index].symbolMap).length>0?!0:!1,r.call(null,o,s)}}},pushNodes:function(e,n,a,o){var l=e;if(l instanceof r||(l=new r(e,n,a,o)),!t.isDef(i[l.modelName]))throw'FATAL ERROR: Model "'+l.modelName+" Is Undeclared.";t.isDef(i[l.modelName].nodeTable[l.attribName])||(i[l.modelName].nodeTable[l.attribName]={nodes:[]}),i[l.modelName].nodeTable[l.attribName].nodes.push(l)},annotateWithLimitProps:function(e,n,i){t.isArray(i)&&!t.isDef(i.page)&&(Object.defineProperty(i,"page",{set:function(t){e.gotoPage(t).of(n)},get:function(){return e.currentPageOf(n)}}),Object.defineProperty(i,"totalPages",{set:function(){},get:function(){return e.totalPagesOf(n)}}),Object.defineProperty(i,"limit",{set:function(t){e.limit(n).to(t)},get:function(){var i=t.isDef(e.limitTable[n])?e.limitTable[n].limit:0;return i}}))},getPageSlice:function(e,n,i){var r=0,a=i.length,o=0,l=0,s=i;return t.isDef(e.limitTable[n])&&t.isArray(i)&&(l=e.limitTable[n].page,o=e.limitTable[n].limit,e.limitTable[n].totalPages=Math.floor(s.length/o),e.limitTable[n].totalPages+=s.length%o>0?1:0,a=o*l<=i.length?o*l:i.length,r=a>l*o-o?l*o-o:0,s=i.slice(r,a),this.annotateWithLimitProps(e,n,s)),s},getAttribute:function(e,n,r,a){if(!t.isDef(i[e]))return null;var o=null,l=i[e].api;return t.isDef(i[e])&&t.isDef(i[e].modelObj[n])&&(o=i[e].modelObj[n]),t.isDef(i[e].filterResults[n])&&(o=i[e].filterResults[n]),t.isDef(l.limitTable[n])&&l.limitTable[n].limit>0&&(o=this.getPageSlice(l,n,o)),t.isDef(i[e].cachedResults[n])&&(o=i[e].cachedResults[n]),t.isDef(r)&&t.isDef(a)&&t.isArray(o)&&t.isDef(o[r][a])?o=o[r][a]:t.isDef(r)&&t.isArray(o[r])&&t.isDef(o[r])&&(o=o[r]),o},dereferenceAttribute:function(e){if(!t.isDef(i[e.modelName]))return null;var n=null,r=null,a=null,o=e.indexQueue.slice(0),l=e.modelName,s=e.attribName,u=i[l].api;if(t.isDef(r=n=this.getAttribute(l,s)))if(t.isArray(r)||t.isObj(r))if(1==o.length&&"length"===o[0])n=t.isDef(u.cachedResults[s])?u.cachedResults[s].length:u.attributes[s].length;else for(;null!=(a=o.shift())&&t.isDef(r[a]);)n=r=r[a];else n=r;return n},setAttribute:function(e,n,r){var a=null;return t.isDef(i[e])&&t.isDef(i[e].modelObj[n])&&(t.isArray(r)&&this.annotateWithLimitProps(i[e].api,n,r),i[e].modelObj[n]=r),a},getListeners:function(e,n){var r=[];return t.isDef(i[e].listeners[n])&&(r=i[e].listeners[n]),r},getFuncHash:function(e){var t=e.toString(),n=t.length+t.charAt(t.length/2);return n},setListener:function(e,n,r,a){if(t.isFunc(r)){var o=this.getFuncHash(r);t.isDef(a)&&1==a&&(o="_LIVE_FILTER_"+o+Math.random(),t.log("Adding duplicate with hash "+o+" on "+e+"."+n)),t.isDef(i[e].listeners[n])||(i[e].listeners[n]=Object.create(null)),i[e].listeners[n][o]=r}},removeAllListeners:function(e,t){delete i[e].listeners[t]},removeListener:function(e,t,n){var r=i[e].listeners[t],a=this.getFuncHash(n);for(var o in r)a==o&&delete r[o]},isDuplicateListener:function(e,t,n){var i=this.getListeners(e,t);for(var r in i)if(n.toString()==i[r].toString())return!0;return!1},removeFilterListeners:function(e,n){if(t.isDef(i[e].listeners[n])){var r=i[e].listeners[n];for(var a in r)0==a.indexOf("_LIVE_FILTER_")&&(t.log("REMOVING Listener with hash: "+a),delete r[a])}},getModel:function(e){var n=null;return this.exists(e)?n=i[e].api:t.log('WARNING: Attempt To Get Model "'+e+'" Failed.'),n},initModel:function(e){i[e.modelName]={modelObj:e.attributes,nodeTable:Object.create(null),api:e,listeners:Object.create(null),cachedResults:e.cachedResults,limitTable:e.limitTable,filterResults:e.filterResults}},isRepeatArrayProperty:function(e){return 1==e.indexQueue.length&&!t.isInt(e.indexQueue[0])},destroyRepeatTree:function(e,n){this.forEach(e,n,function(e,n){(n.index>-1||!document.body.contains(n.node))&&e.removeItem(e.index),!t.isNull(n.node.parentNode)&&n.index>t.UNINDEXED&&n.node.parentNode.removeChild(n.node)})},pruneDeadEmbeds:function(){var e=this;e.forEach(function(n){e.forEach(n.modelName,function(n){e.forEach(n.modelName,n.modelAtrribName,function(e,n){var i=n.node;t.isNullOrEmpty(n.repeatModelName)||t.isNullOrEmpty(n.repeatAttribName)||document.body.contains(i)||e.removeItem(e.index)})})})},pruneNodeTreeByScope:function(e){if(!t.isNullOrEmpty(e)){var n=null,i=this;i.forEach(function(r){i.forEach(r.modelName,function(r){i.forEach(r.modelName,r.modelAtrribName,function(r,a){var o=a.node;null!==(n=a.scope.split(" "))&&i.isInScopeList(a.scope,e)&&!i.isInScopeList(a.scope,e,!0)&&(r.removeItem(r.index),t.log("Pruning "+o.tagName+" for "+r.modelName+"."+r.modelAtrribName+" scope: "+n[0]+" "+n[1]))})})})}},getInternalModel:function(e){return results=null,this.exists(e)&&(results=i[e]),results},getMap:function(){return i},getRepeat:function(){return n}}});structureJS.module("System",function(e){var t=this,n=e("Map");return{setSystemListeners:function(e,i){var r=t.SYSTEM_EVENT_TYPES.system,a=n.getMap(),o=a[r].listeners[r];t.isFunc(i)&&(t.isDef(o)||(o=a[r].listeners[r]=Object.create(null)),t.isDef(o[e])||(o[e]=[]),o[e].push(i))},getSystemListeners:function(e){var i=t.SYSTEM_EVENT_TYPES.system,r=n.getMap(),a=r[i].listeners[i],o=[];return t.isNullOrEmpty(e)||t.isDef(a)&&t.isDef(a[e])&&(o=a[e]),o},removeSystemListeners:function(e){var i=t.SYSTEM_EVENT_TYPES.system,r=n.getMap(),a=r[i].listeners[i];t.isNullOrEmpty(e)||t.isDef(a)&&t.isDef(a[e])&&delete a[e]}}});structureJS.module("Process",function(e){var t=this,n=e("TMP_Node"),i=e("Map"),r=e("DOM"),a=e("Attribute")(),o=structureJS.circular();return{parseModelAttribName:function(e){var n=["",""];return t.isDef(e)&&(n=e.split(".")).length>1,n},buildNT:function(e){for(var n,i=e.modelName+"."+e.attribName,r=t.isArray(e.indexQueue)?e.indexQueue.slice(0):[],a="";null!=(n=r.shift(r));)a+="["+n+"]";return"{{"+i+a+"}}"},buildItemNT:function(e,t){return e.modelName+"."+e.attribName+"["+t+"]"},checkForCustomAttribute:function(e,n){var i;null!=(i=a.getAttribute(n))&&(t.isDef(e.__customAttributes__)||(e._setAttribute=e.setAttribute,e.__customAttributes__={},e.setAttribute=function(e,t){for(var n in this.__customAttributes__)this.__customAttributes__[n].name==e&&this.__customAttributes__[n].onChange.call(this.__customAttributes__[n],this,t);this._setAttribute.call(this,e,t)}),e.__customAttributes__[i.name]=i,i.onCreate.call(i,e))},preProcessNodeAttributes:function(e,r,a){var l,s,u=null,c=null,d=[],m=o("Interpolate");if(a=t.isInt(a)?parseInt(a):-1,e.hasAttributes()&&"OPTION"!=e.tagName){u=e.attributes;for(var p=0;p<u.length;p++){l=u[p].value,this.checkForCustomAttribute(e,u[p].name),s=o("Compile").getAllTokens(l);for(var f=0;f<s.length;f++)(null==c||null!=c&&(s[f].modelName!=c.modelName||s[f].attribName!=c.attribName))&&(c=new n(e,s[f].modelName,s[f].attribName,a),i.pushNodes(c)),c.symbolMap[u[p].name]=l,c.scope=r,m.updateNodeAttributes(c,c.modelName,c.attribName),d.push(c)}}return d},_preProcessRepeatAttributes:function(e,n,i){var r,a,o,l=null,s=!1;if(e.hasAttributes()&&"OPTION"!=node.tagName){r=e.attributes;for(var u=0;u<r.length;u++){for(a=r[u].value,t.RX_RPT_SPC_SYM.lastIndex=0;null!=(l=t.RX_RPT_SPC_SYM.exec(a));)s=!0,o=l[0],"{{}}"==o&&(n.indexQueue.push(i),a=a.replace(o,this.buildNT(n)),n.indexQueue.pop()),"{{$index}}"==o&&(a=a.replace(o,i)),"{{$item}}"==o&&(a=a.replace(o,this.buildItemNT(n,i))),"{{}}"!=o&&"{{$index}}"!=o&&(n.indexQueue.push(i),n.indexQueue.push(l[1]),a=a.replace(o,this.buildNT(n)),n.indexQueue.pop(),n.indexQueue.pop());e.setAttribute(r[u].name,a)}}return s},_preprocessInPlace:function(e,n){var i,r=null;for(nonTerminal="",match=null,templateText=e.node.nodeValue,annotatedNT="",symbol="",e.hasNonTerminals=!0,i=e.node.nodeValue,t.RX_RPT_SPC_SYM.lastIndex=0;null!=(r=t.RX_RPT_SPC_SYM.exec(e.node.nodeValue));)symbol=r[0],"{{}}"==symbol&&(e.indexQueue.push(n),i=i.replace(symbol,this.buildNT(e)),e.indexQueue.pop()),"{{$index}}"==symbol&&(i=i.replace(symbol,n)),"{{$item}}"==symbol&&(i=i.replace(symbol,this.buildItemNT(TMP_baseNode,n))),"{{}}"!=symbol&&"{{$index}}"!=symbol&&(e.indexQueue.push(n),e.indexQueue.push(r[1]),i=i.replace(symbol,this.buildNT(e)),e.indexQueue.pop(),e.indexQueue.pop());for(e.node.nodeValue=i,t.RX_M_ATTR_TOK.lastIndex=0;null!=(match=t.RX_M_ATTR_TOK.exec(templateText))&&!/%(\w+)%/.test(templateText);)(match[1]!=e.modelName||match[2]!=e.attribName)&&(e.embeddedModelAttribs[match[1]+"."+match[2]]=!0,annotatedNT=match[0].replace("}}","")+"%mdl%"+e.modelName+"%/mdl%%att%"+e.attribName+"%/att%%i%"+n+"%/i%}}",e.node.nodeValue=e.node.nodeValue.replace(match[0],annotatedNT));return e.hasNonTerminals=0==e.hasNonTerminals?!t.isNullOrEmpty(e.node.nodeValue.trim()):e.hasNonTerminals,e.hasNonTerminals},_cloneBaseNode:function(e,t){var i=null,a=document.createElement(e.node.tagName.toLowerCase()),o=new n(a,e.modelName,e.attribName,t);return r.cloneAttributes(e.node,o.node),i=e.node.getAttribute("id"),i=null==i?"":o.node.setAttribute("id",i+"-"+t),o.hasNonTerminals=e.hasNonTerminals,o.node.innerHTML=e.node.innerHTML,o},_traverseRepeatNode:function(e,i,a){for(var l=null,s="",u=null,c=!1,d=0;d<e.length;d++){if(e[d].nodeType==t.ELEMENT_NODE){if(c|=this._preProcessRepeatAttributes(e[d],a,i),s=r.getDataAttribute(e[d],t.IE_MODEL_REPEAT_KEY),(u=o("Compile").getRepeatToken(s)).length>0&&(e[d].token=u[0]),!t.isNullOrEmpty(s)){e[d].setAttribute("data-"+t.IE_MODEL_REPEAT_KEY,s),(u[0].modelName!=a.modelName||u[0].attribName!=a.attribName)&&(a.embeddedRepeats[u[0].modelName+"."+u[0].attribName]=!0);continue}if(!e[d].hasChildNodes())continue;c|=this._traverseRepeatNode(e[d].childNodes,i,a)}e[d].nodeType==t.TEXT_NODE&&(l=new n(e[d],a.modelName,a.attribName,i),l.inheritToken(a),c|=this._preprocessInPlace(l,i),t.mixin(l.embeddedModelAttribs,a.embeddedModelAttribs))}return c},preProcessRepeatNode:function(e,n){var i=this._cloneBaseNode(e,n),r=e.node.tmp_component,a=t.isDef(r);return i.hasNonTerminals=this._traverseRepeatNode([i.node],n,e),(!i.node.hasChildNodes()||a)&&(this.preProcessNode(i.node,i.scope),this.preProcessNodeAttributes(i.node,i.scope,n),a&&r.onCreate.call(r,i.node)),i},preProcessTextInput:function(e,n){n=t.isDef(n)?n:"keyup",e.addEventListener(n,function(e){var t=r.getDOMAnnotations(this);i.setAttribute(t.modelName,t.attribName,e.target.value),State.ignoreKeyUp=!0,Interpolate.interpolate(t.modelName,t.attribName,e.target.value),State.ignoreKeyUp=!1})},addCurrentSelectionToCheckbox:function(e,n){t.isDef(n.current_selection)||!function(e){Object.defineProperty(n,"current_selection",{configurable:!0,set:function(t){this._value_=t;for(var n=document.querySelectorAll("input[name="+e+"]"),i=0;i<n.length;i++)n[i].value==t&&(n[i].checked=!0)},get:function(){return this._value_}})}(e.attrib)},addCurrentSelectionToSelect:function(e,n){!function(e){Object.defineProperty(n,"current_selection",{configurable:!0,set:function(n){if(""!=n){var a=r.getDOMAnnotations(e);this._value_=n;for(var o=0;o<e.children.length;o++)e.children[o].value==n&&(e.selectedIndex=o,State.dispatchListeners=!1,Interpolate.interpolate(a.modelName,a.attribName),State.dispatchListeners=!0,Interpolate.dispatchListeners(i.getListeners(a.modelName,a.attribName),{type:t.MODEL_EVENT_TYPES.select_change,value:e.children[o].value,text:e.children[o].text,index:e.selectedIndex}))}},get:function(){return this._value_}})}(e)},bindCheckboxListener:function(e){e.addEventListener("click",function(e){var n=i.dereferenceAttribute(this.token),a={type:t.MODEL_EVENT_TYPES.checkbox_change,checked:e.target.checked===!0,value:e.target.value},o=r.getDOMAnnotations(this);n._value_=1==a.checked?e.target.value:!1,n.checked[this.getAttribute("id")]=a.checked,State.dispatchListeners=!1,Interpolate.interpolate(o.modelName,o.attribName),State.dispatchListeners=!0,Interpolate.dispatchListeners(i.getListeners(o.modelName,o.attribName),a)})},preProcessInputNode:function(e,a){var l,s=e.getAttribute("type")||"",u=o("Compile").getTokens(e.getAttribute("value")),c=(o("Interpolate"),t.COMPILE_ME);if(!(u.length<1)){switch(l=u[0],r.annotateDOMNode(e,l.modelName,l.attribName,l),s=s.toLowerCase()){case"checkbox":case"radio":var d,m=null,p="",f="",h=!1,N="";if(d=i.dereferenceAttribute(l),t.isArray(d)){d._value_="",t.isDef(d.checked)||(d.checked={});for(var b=0;b<d.length;b++,h=!1)t.isDef(d[b].description)||t.isDef(d[b].value)?(p=t.isDef(d[b].value)?d[b].value:p,f=t.isDef(d[b].description)?d[b].description:f,h=t.isDef(d[b].checked)?d[b].checked:h):p=f=d[b],N=t.isDef(d[b].id)?d[b].id:b,m=new n(document.createElement("input"),l.model,l.attrib,b),m.scope=a,m.inheritToken(l),m.node.setAttribute("name",l.attribName),m.node.setAttribute("id",N),r.annotateDOMNode(m.node,l.modelName,l.attribName,l),t.isDef(d.checked[N])&&(h=d.checked[N]),d.checked[N]=h,1==h&&(d._value_=p,m.node.setAttribute("checked",h)),r.cloneAttributes(e,m.node),m.node.setAttribute("value",p),this.addCurrentSelectionToCheckbox(e,d),e.parentNode.insertBefore(m.node,e),e.parentNode.insertBefore(document.createTextNode(f),e),this.bindCheckboxListener(m.node),i.pushNodes(m)}e.parentNode.removeChild(e),c=t.RECOMPILE_ME;break;case"text":this.preProcessTextInput(e);break;case"date":this.preProcessTextInput(e),this.preProcessTextInput(e,"blur");break;default:this.preProcessTextInput(e)}return c}},preProcessNode:function(e,a,l){if(t.isDef(e)&&null!==e){l=t.isInt(l)?parseInt(l):-1;var s=r.getDataAttribute(e,t.IE_MODEL_REPEAT_KEY),u=t.isNullOrEmpty(s)?e.tagName:"REPEAT",c=[],d=null,m=null,p=t.COMPILE_ME;switch(u){case"SELECT":var f;if(t.RX_M_ATTR.lastIndex=0,(c=o("Compile").getTokens(e.innerHTML)).length<1)break;f=c[0],e.innerHTML="",r.annotateDOMNode(e,f.modelName,f.attribName,f),m=new n(e,f.modelName,f.attribName),m.inheritToken(f),m.scope=a,Interpolate.intializeSelect(m,!0,0),i.pushNodes(m),e.addEventListener("change",function(e){var n=i.dereferenceAttribute(this.token),a={type:t.MODEL_EVENT_TYPES.select_change,value:e.target.options[e.target.selectedIndex].value,text:e.target.options[e.target.selectedIndex].text,index:e.target.selectedIndex},o=r.getDOMAnnotations(this);n.current_selection=a.value,Interpolate.dispatchListeners(i.getListeners(o.modelName,o.attribName),a)});break;case"INPUT":p=this.preProcessInputNode(e,a);break;case"TEXTAREA":this.preProcessInputNode(e,a);break;case"REPEAT":var h=r.getDOMAnnotations(e);d=new n(e,h.modelName,h.attribName),d.inheritToken(e.token),d.scope=a,i.addRepeatBaseNode(d),p=t.NO_COMPILE_ME}return document.body.contains(e)&&this.preProcessNodeAttributes(e,a,l),p}}}});structureJS.module("Interpolate",function(e){var t=this,n=e("TMP_Node"),i=e("Map"),r=e("DOM"),a=e("Process"),o=e("System"),l=structureJS.circular();return{dispatchListeners:function(e,n){if(t.isDef(e)&&1==State.dispatchListeners)for(var i in e)t.isFunc(e[i])&&e[i].call(null,n)},dispatchSystemListeners:function(e){if(!t.isNullOrEmpty(e)){{var n=o.getSystemListeners(e);t.SYSTEM_EVENT_TYPES.system}if(t.SYSTEM_EVENT_TYPES.LIST_TYPE==t.QUEUE)for(var i=0;i<n.length;i++)t.isFunc(n[i])&&n[i].call(null);else if(t.SYSTEM_EVENT_TYPES.LIST_TYPE==t.STACK)for(var i=n.length-1;i>=0;i--)t.isFunc(n[i])&&n[i].call(null)}},updateNodeAttributes:function(e){var n={},r=e.node;if(r.hasAttributes()&&0==e.isComponent){for(var a,o,s,u="",d="",c="",p="",m=r.attributes,f=0;f<m.length;f++)if(c=m[f].name,d=t.isDef(e.symbolMap[c])?e.symbolMap[c]:"",!t.isNullOrEmpty(d=e.symbolMap[c])){s=l("Compile").getAllTokens(d);for(var h=0;h<s.length;h++)p=i.dereferenceAttribute(s[h]),t.isArray(p)&&(p=s[h].fullToken),u=d.replace(s[h].fullToken,p),d=u;r.setAttribute(c,u),n[c]=u}}else if(1==e.isComponent&&(a=Templar._components[e.componentName],(o=Object.keys(e.symbolMap)).length>0)){s=l("Compile").getTokens(e.symbolMap[o[0]]);for(var h=0;h<s.length;h++)r.setAttribute(o[0],i.dereferenceAttribute(s[h]))}return n},interpolateSpan:function(e){var n=e.node,r=i.dereferenceAttribute(e);n.innerText=n.innerHTML=t.isArray(r)||t.isObj(r)?"":r},getPageSlice:function(e,n,i){var r=0,a=i.length,o=0,l=0,s=i;return t.isDef(e.limitTable[n])&&(l=e.limitTable[n].page,o=e.limitTable[n].limit,a=o*l<=i.length?o*l:i.length,r=a>l*o-o?l*o-o:0,s=i.slice(r,a)),s},getPageSliceData:function(e,n,i){var r=0,a=i.length,o=0,l=0,s=Object.create(null);return s.start=-1,s.length=0,t.isDef(e.limitTable[n])&&(l=e.limitTable[n].page,o=e.limitTable[n].limit,a=o*l<=i.length?o*l:i.length,r=a>l*o-o?l*o-o:0,s.start=r,s.length=a),s},interpolateEmbeddedRepeats:function(e,n){var o,s,u,d,c,p;for(var m in e.embeddedRepeats)if(e.embeddedRepeats.hasOwnProperty(m)&&(p=a.parseModelAttribName(m),d=p[0],c=p[1],o=i.getRepeatBaseNodes(d,c),i.pruneBaseNodes(o),!t.isNull(s=o[n]))){if(r.isVisible(s.node.parentNode)&&t.isArray(u=i.dereferenceAttribute(s)))for(var f=0;f<u.length;f++)TMP_repeatedNode=a.preProcessRepeatNode(s,f),TMP_repeatedNode.scope=s.scope,i.pushNodes(TMP_repeatedNode),0==TMP_repeatedNode.hasNonTerminals&&(TMP_repeatedNode.node.innerHTML=u[f]),s.node.parentNode.insertBefore(TMP_repeatedNode.node,s.node),l("Compile").compile(TMP_repeatedNode.node,s.scope,f);s.node.setAttribute("style","display:none;")}},intializeSelect:function(e,r,o){var l=!t.isNullOrEmpty(e.repeatModelName)&&!t.isNullOrEmpty(e.repeatAttribName);run=r?r&&l:!r&&!l;var o,s,u,d,c,p=i.dereferenceAttribute(e),m=e.modelName,f=e.attribName,h=p._value_;if(a.addCurrentSelectionToSelect(e.node,p),run&&t.isArray(p)){var N=o>0&&0==e.node.children.length;if(1==N&&i.forEach(e.modelName,e.attribName,function(t,n){"OPTION"==n.node.tagName&&t.modelAttribIndex<o&&e.node.appendChild(n.node)}),p.length>o){s=p.length-o,u=p.length-s;for(var b=0;s>b;b++,u++,o++){var _=new n(document.createElement("option"),m,f,u);_.inheritToken(e),_.node.text=t.isDef(d=p[u].text)?d:p[u],_.node.value=t.isDef(c=p[u].value)?c:p[u],e.node.appendChild(_.node),_.scope=e.scope,e.node.selectedIndex=0,e.node.selectedIndex=t.isNullOrEmpty(h)||_.node.value!=h?e.node.selectedIndex:b,i.pushNodes(_)}}}},interpolate:function(e,n,s,u){if(i.exists(e)){listeners=i.getListeners(e,n),Interpolate=this,attribCurrState=i.getAttribute(e,n),updateObject=Object.create(null),numNodesToAdd=0,numNodesToRemove=0,newNodeStartIndex=0,TMP_repeatBaseNode=null,updateObj=Object.create(null),nodeScopeParts=null,node=null,tagName="",attributes=null,i.forEach(e,n,function(d,c){if(!t.isDef(u)||i.isInScopeList(c.scope,u))switch(node=c.node,tagName=1==c.isComponent?"COMPONENT":node.tagName,tagName=1!=i.isRepeatedAttribute(e,n)||i.isRepeatArrayProperty(c)?node.tagName:"REPEAT",1==d.hasAttributes&&(updateObject=Interpolate.updateNodeAttributes(c,e,n)),tagName){case"SELECT":Interpolate.intializeSelect(c,!1,d.modelAttribLength);break;case"OPTION":if(t.isArray(s=i.dereferenceAttribute(c))){var p=node.parentNode;s.length<=d.modelAttribLength&&d.modelAttribIndex<s.length&&(node.text=t.isDef(text=s[d.modelAttribIndex].text)?text:s[d.modelAttribIndex],node.value=t.isDef(value=s[d.modelAttribIndex].value)?value:s[d.modelAttribIndex],p.selectedIndex=t.isDef(s[d.modelAttribIndex].selected)&&1==s[d.modelAttribIndex].selected?d.modelAttribIndex:p.selectedIndex),updateObj.value=p.options[p.selectedIndex].value,updateObj.text=p.options[p.selectedIndex].text,updateObj.type=t.MODEL_EVENT_TYPES.interp_change,updateObj.index=p.selectedIndex,updateObj._attrib_=s,d.modelAttribIndex>=s.length&&(d.removeItem(d.index),p.removeChild(node))}break;case"SPAN":Interpolate.interpolateSpan(c),updateObj.text=node.innerText,updateObj.value=node.innerText,updateObj.type=node.tagName.toLowerCase();break;case"INPUT":attributes=r.getDOMAnnotations(c.node),attributes.modelName==c.modelName&&attributes.attribName==c.attribName&&(t.isArray(s=i.dereferenceAttribute(c))||0!=State.ignoreKeyUp||(node.value=s),updateObj.text=node.value,updateObj.value=node.value,updateObj.type=node.tagName.toLowerCase(),updateObj.target=node);break;case"TEXTAREA":c.node.value=s,updateObj.text=node.value,updateObj.value=node.value,updateObj.type=node.tagName.toLowerCase(),updateObj.target=node;break;case"REPEAT":var m=null,f=null;d.endingIndex=0,i.destroyRepeatTree(e,n),f=i.getRepeatBaseNodes(e,n),i.pruneBaseNodes(f);for(var h=0;h<f.length;h++){if(TMP_repeatBaseNode=f[h],document.body.contains(TMP_repeatBaseNode.node)&&t.isArray(s=i.dereferenceAttribute(TMP_repeatBaseNode))&&s.length>0){for(var N=0;N<s.length;N++)m=a.preProcessRepeatNode(TMP_repeatBaseNode,N),m.scope=TMP_repeatBaseNode.scope,i.pushNodes(m),0==m.hasNonTerminals&&(m.node.innerHTML=s[N]),TMP_repeatBaseNode.node.parentNode.insertBefore(m.node,TMP_repeatBaseNode.node),l("Compile").compile(m.node,TMP_repeatBaseNode.scope,N),Interpolate.interpolateEmbeddedRepeats(TMP_repeatBaseNode,N);i.pruneDeadEmbeds(),Interpolate.dispatchSystemListeners(t.SYSTEM_EVENT_TYPES.repeat_built),o.removeSystemListeners(t.SYSTEM_EVENT_TYPES.repeat_built),updateObj.type="repeat",updateObj.value=s}TMP_repeatBaseNode.node.setAttribute("style","display:none;")}}}),t.isDef(updateObj.type)&&(updateObj.type==t.MODEL_EVENT_TYPES.interp_change&&(updateObj._attrib_._value_=updateObj.value),Interpolate.dispatchListeners(listeners,updateObj))}}}});structureJS.module("Compile",function(e){var t=this,n=e("TMP_Node"),i=(e("ControlNodeHeader"),e("Map")),r=e("DOM"),a=e("Interpolate"),o=e("Process"),l=e("State"),s=e("Token"),u=structureJS.circular();return{getTokens:function(e,n){var i,r=new s,a=null,l=null,u=[],d=t.RX_TOKEN,c=t.RX_ALL_INX;for(t.isDef(n)&&1==n&&(d=t.RX_RPT_M_ATTR,c=t.RX_RPT_ALL_INX),d.lastIndex=0,c.lastIndex=0,t.RX_IDX_ITER.lastIndex=0,t.RX_ANNOT.lastIndex=0;null!=(a=c.exec(e));){var p,m=null,f=t.isDef(a[3])?a[3]:"",h=null;for(r.start=a.index,r.end=c.lastIndex,r.fullToken=a[1],null!=(l=d.exec(r.fullToken))&&(i=o.parseModelAttribName(l[1]),r.modelName=i[0],r.attribName=i[1]);null!=(m=t.RX_IDX_ITER.exec(a[3]));)p=t.isDef(m[1])?m[1]:m[2],r.indexQueue.push(p);for(;null!=(h=t.RX_ANNOT.exec(f));)switch(h[1]){case"mdl":r.repeatModelName=h[2];break;case"att":r.repeatAttribName=h[2];break;case"i":r.repeatIndex=h[2]}u.push(r),r=new s}return u},getRepeatToken:function(e){return this.getTokens(e,!0)},getAllTokens:function(e){return this.getTokens(e)},compile:function(e,s,d){if(t.isNull(e)||t.isNull(e.childNodes))return s;d=t.isInt(d)?parseInt(d):-1;var c=e.getAttribute("data-apl-default"),p=e.getAttribute("id"),m=1==l.blockBodyCompilation&&p==t.MAIN_CONTENT_ID;t.isNullOrEmpty(c)||m||(e.setAttribute("data-apl-default",""),r.asynGetPartial(c,u("Bootstrap").loadPartialIntoTemplate,null,e),t.log("Spawning Thread <"+c+"> w/ target <"+e.id+"> w/ scope <"+s+">"));for(var f=e.childNodes,h=[],N=null,b=null,_=null,T=null,g=null,E=0,A="",v="",O="",y="",M=t.NO_COMPILE_ME,D=0;D<f.length;D++)if(T=f[D],_=T.parentNode,T.nodeType!=t.TEXT_NODE||t.isNull(_)||"OPTION"===_.tagName){if(T.nodeType==t.ELEMENT_NODE){var R,S=T.tagName.toLowerCase(),I=Templar._components[S],P=null,x=null;if(t.isDef(I)&&!t.isNullOrEmpty(I.templateContent)&&!t.isNull(T.parentNode)){if(T.insertAdjacentHTML("afterend",I.templateContent),P=T.nextElementSibling,1==I.transclude){var L;if(!t.isNullOrEmpty(L=P.getElementsByTagName("CONTENT"))){L=L[0];for(var C=0;C<T.childNodes.length;C++)t.isNull(L.parentNode)||L.parentNode.insertBefore(T.childNodes[C],L),C--;t.isNull(L.parentNode)||L.parentNode.removeChild(L)}}P.tmp_component=I,r.cloneAttributes(T,P,!0),x=o.preProcessNodeAttributes(P,s,d),t.isDef(P._setAttribute)?P._setAttributeWrapper=P.setAttribute:P._setAttribute=P.setAttribute,P.setAttribute=function(e,n){var i,r=this.tmp_component;t.isFunc(i=r.attributes[e])&&i.call(r,this,n),t.isDef(this._setAttributeWrapper)?this._setAttributeWrapper.call(this,e,n):this._setAttribute.call(this,e,n)};for(var k=0;k<x.length;k++)x[k].isComponent=!0,x[k].componentName=S;I.onCreate.call(I,P),R=r.getDataAttribute(T,t.IE_MODEL_REPEAT_KEY),T.parentNode.removeChild(T),T=P,t.isNullOrEmpty(R)||T.setAttribute("data-"+t.IE_MODEL_REPEAT_KEY,R),D++}R=r.getDataAttribute(T,t.IE_MODEL_REPEAT_KEY);var h;switch(!t.isNullOrEmpty(R)&&(h=this.getRepeatToken(R)).length>0&&r.annotateDOMNode(T,h[0].modelName,h[0].attribName,h[0]),M=o.preProcessNode(T,s,d)){case t.COMPILE_ME:this.compile(T,s,d);break;case t.NO_COMPILE_ME:break;case t.RECOMPILE_ME:D--}}}else{A=T.nodeValue,h=this.getTokens(A);for(var w=0;w<h.length;w++){v=_.tagName,O=h[w].modelName,y=h[w].attribName;var b=document.createElement("span");if(g=new n(b,O,y),g.inheritToken(h[w]),g.scope=s,g.index=d,N=r.splitText(T,h[w].start-E),E+=T.nodeValue.length,N.nodeValue.trim()==h[w].fullToken&&(g.node.innerText=N.nodeValue,a.interpolateSpan(g),_.replaceChild(g.node,N),i.pushNodes(g)),T.nodeValue.trim()==h[w].fullToken&&(g.node.innerText=T.nodeValue,a.interpolateSpan(g),_.replaceChild(g.node,T),i.pushNodes(g)),T=f[++D],T.nodeType!=t.TEXT_NODE)break;if(N=r.splitText(T,h[w].end-E),E+=T.nodeValue.length,N.nodeValue.trim()==h[w].fullToken&&(g.node.innerText=N.nodeValue,a.interpolateSpan(g),_.replaceChild(g.node,N),i.pushNodes(g)),T.nodeValue.trim()==h[w].fullToken&&(g.node.innerText=T.nodeValue,a.interpolateSpan(g),_.replaceChild(g.node,T),i.pushNodes(g)),T=f[++D],T.nodeType!=t.TEXT_NODE)break}h.length=0,E=0}return s}}});structureJS.module("Link",function(e){var t=this,n=e("Map"),i=e("Interpolate"),r=e("System");return{bindModel:function(e){Object.create(null);n.forEach(function(t,r){n.forEach(r,function(t){i.interpolate(t.modelName,t.modelAtrribName,n.getAttribute(t.modelName,t.modelAtrribName),e)})}),State.compiledScopes="",i.dispatchSystemListeners(t.SYSTEM_EVENT_TYPES.link_done),r.removeSystemListeners(t.SYSTEM_EVENT_TYPES.link_done)}}});structureJS.module("ModelAPI",function(e){{var t=this,n=e("ModelHeader"),i=e("Map"),r=e("Interpolate");e("State")}n.prototype.softset=function(e,n){this.cachedResults[e]=n,r.interpolate(this.modelName,e,n),delete this.cachedResults[e],t.isDef(this.limitTable[e])&&(this.limitTable[e].page=1)},n.prototype.update=function(e){r.interpolate(this.modelName,e,i.getAttribute(this.modelName,e))},n.prototype.listen=function(e,t){i.isDuplicateListener(this.modelName,e,t)||i.setListener(this.modelName,e,t)},n.prototype.unlisten=function(e,n){t.isFunc(n)?i.removeListener(this.modelName,e,n):t.isString(e)&&i.removeAllListeners(this.modelName,e)},n.prototype.save=function(){var e="";t.isDef(this.attributes.__meta__)||(this.attributes.__meta__={});for(var n in this.attributes){var i=this.attributes[n];if(t.isArray(i))for(var r in i)i.hasOwnProperty(r)&&!t.isInt(r)&&(t.isDef(this.attributes.__meta__[n])||(this.attributes.__meta__[n]={}),this.attributes.__meta__[n][r]=t.isString(i[r])?i[r]:JSON.stringify(i[r]))}return e=JSON.stringify(this.attributes),delete this.attributes.__meta__,t.isDef(window.sessionStorage)&&(window.sessionStorage[this.modelName]=e),e},n.prototype.load=function(e){var n,i=!1;t.isDef(window.sessionStorage)&&!t.isDef(e)&&(e=window.sessionStorage[this.modelName],window.sessionStorage.removeItem(this.modelName));try{n=JSON.parse(e)}catch(r){i=!0}if(1==i)return void t.log("ERROR: Frozen item was not proper JSON. Thaw failed.");var a,o,l;for(var s in n)"__meta__"!=s&&(this[s]=n[s]);if(t.isDef(a=n.__meta__))for(var s in a){o=a[s];for(var u in o)if(t.isDef(this.attributes[s])){try{l=JSON.parse(o[u])}catch(r){l=o[u]}"_value_"==u&&(this.attributes[s].current_selection=l),this.attributes[s][u]=l}}}});structureJS.module("ModelFilter",function(e){var t=this,n=e("ModelHeader"),i=e("Map"),r=e("Interpolate");n.prototype.sort=function(e,n,a){var o=Object.create(null),l=this,s=t.isDef(l.limitTable[e])?l.limitTable[e].page:0,u=0,d=-1,c=1,p=0;return o.target=i.getAttribute(l.modelName,e),t.isDef(n)&&n>0&&t.isDef(l.limitTable[e])&&(s=l.limitTable[e].page,l.limitTable[e].page=n,o.target=i.getPageSlice(l,e,o.target)),o.propName=null,o.prevProps=[],o.insertSortedSlice=function(e,n,a,o){if(t.isDef(n.limitTable[a])){n.limitTable[a].page=t.isDef(o)?o:s,u=n.limitTable[a].limit,n.limitTable[a].limit=0;var l=n.attributes[a];n.limitTable[a].limit=u;var d=r.getPageSliceData(n,a,l),c=null;if(d.start>-1&&!t.isNull(e)){c=l.slice(0);for(var p=0,m=d.start;p<e.length&&m<d.length;p++,m++)c[m]=e[p];i.setAttribute(n.modelName,a,c.slice(0)),n.limitTable[a].page=s}}},o.arePastPropsAligned=function(e,t){for(var n=!0,i=0;i<o.prevProps.length;i++)n&=e[o.prevProps[i]]==t[o.prevProps[i]];return n},o.getSorter=function(e){var n=function(t,n){var i=e.call(null,t,n);return i=1==o.arePastPropsAligned(t,n)?i:p};return t.isFunc(e)?n:o.sorter},o.sorter=function(e,n){var i=e,r=n,e=t.isNull(o.propName)?e:e[o.propName],n=t.isNull(o.propName)?n:n[o.propName],a=p;return t.isDef(e)&&t.isDef(n)?(a=n==e?p:e>n?c:d,a=1==o.arePastPropsAligned(i,r)?a:p):p},o.orderBy=function(t,i){return o.propName=t,o.target.sort(o.getSorter(i)),o.insertSortedSlice(o.target,l,e,n),o.prevProps.push(t),o},o.thenBy=function(t,i){return o.propName=t,o.target.sort(o.getSorter(i)),o.insertSortedSlice(o.target,l,e,n),o.prevProps.push(t),o},o.target.sort(o.getSorter(a)),o.insertSortedSlice(o.target,l,e,n),o},n.prototype.sortCurrentPageOf=function(e){var n=(Object.create(null),this),i=n.limitTable[e];return t.isDef(i)?n.sort(e,i.currentPage):void 0}});structureJS.module("ModelFilter",function(e){var t=this,n=e("ModelHeader"),i=e("Map"),r=e("Interpolate");n.prototype.limit=function(e){var n=Object.create(null),r=this,a=0,o=0;return n.to=function(n){delete r.limitTable[e],a=i.getAttribute(r.modelName,e),t.isArray(a)&&n>=0&&(o=Math.floor(a.length/n),o+=a.length%n>0?1:0,r.limitTable[e]={limit:n,page:1,totalPages:o,currentPage:1},r.update(e))},n},n.prototype.gotoPage=function(e){var n=Object.create(null),a=this,o=null;return n.of=function(n){o=a.limitTable[n],t.isDef(o)&&e>0&&e<=o.totalPages&&(o.page=o.currentPage=e,r.interpolate(a.modelName,n,i.getAttribute(a.modelName,n)))},n},n.prototype.gotoNextPageOf=function(e){var n=this,i=n.limitTable[e];t.isDef(i)&&i.currentPage+1<=i.totalPages&&n.gotoPage(++i.currentPage).of(e)},n.prototype.gotoPreviousPageOf=function(e){var n=this,i=n.limitTable[e];t.isDef(i)&&i.currentPage-1>0&&n.gotoPage(--i.currentPage).of(e)},n.prototype.currentPageOf=function(e){var n=this,i=n.limitTable[e],r=0;return t.isDef(i)&&(r=i.currentPage),r},n.prototype.totalPagesOf=function(e){var n=this,i=n.limitTable[e],r=0;return t.isDef(i)&&(r=i.totalPages),r}});structureJS.module("ModelFilter",function(e){var t=this,n=e("ModelHeader"),i=e("Map"),r=e("Interpolate");n.prototype.filterWarapper=function(e,n,a,o,l,s,u){if(t.isDef(l)&&1==l&&delete this.cachedResults[e],t.isDef(u)&&1==u)return 0==o.call(null,a)?(t.isNullOrEmpty(a)&&r.interpolate(this.modelName,e,i.getAttribute(this.modelName,e)),!1):!0;var d=this,c=[],p=i.getAttribute(d.modelName,e),m=null,f=null;if(p=i.getPageSlice(d,e,p),t.isArray(p)){for(var h=0;h<p.length;h++)f=p[h],itemValue=!t.isNullOrEmpty(n)&&t.isDef(f[n])?f[n]:f,m=1==s?o.call(null,itemValue):!t.isNullOrEmpty(a)&&o.call(null,a,itemValue),1==m&&c.push(f);c.length<1?(delete d.cachedResults[e],1==l&&(c=i.getAttribute(d.modelName,e),r.interpolate(d.modelName,e,c))):(d.cachedResults[e]=c,t.isDef(s)&&1==s&&(d.filterResults[e]=c),r.interpolate(d.modelName,e,c))}return!0},n.prototype.filter=function(e){var n=Object.create(null),r=this,a=!0,o=void 0,l=function(e,n){var i=!t.isNullOrEmpty(n)&&!t.isNullOrEmpty(e);return i&&0==n.toString().toLowerCase().indexOf(e.toLowerCase())};return n.propName="",n.isStatic=!1,n.liveAndFuncs=[],n.using=function(s){return t.isFunc(s)?(a=!1,o=!0,n.isStatic=!0,r.filterWarapper(e,n.propName,null,s,a,o)):(t.isDef(r.liveFilters[e])||(r.liveFilters[e]=[]),r.liveFilters[e].push(s),i.setListener(r.modelName,s,function(i){a=n.liveAndFuncs.length<1;for(var s=!0,u=!1,d=0;d<n.liveAndFuncs.length&&1==s;d++){var c=1==n.liveAndFuncs[d].length;s=n.liveAndFuncs[d].funct.call(null,i.text,n.propName,c),u|=!c}t.log("overrideDefaultLiveFilter: "+u),1==s&&0==u&&r.filterWarapper(e,n.propName,i.text,l,a,o)},!0)),n},n.by=function(e){return n.propName=e,n},n.andBy=function(e){return n.propName=e,n},n.and=function(i){return t.isFunc(i)&&(n.liveAndFuncs.push({funct:function(t,l,s){return o=n.isStatic,a=!n.isStatic,r.filterWarapper(e,l,t,i,a,o,s)},length:i.length}),n.liveAndFuncs.sort(function(e){return 1!=e.funct.length}),a=!1,o=1==i.length,1==o&&r.filterWarapper(e,n.propName,null,i,a,o)),n},n},n.prototype.resetLiveFiltersOf=function(e){var n=null;if(t.isDef(this.liveFilters[e])){n=this.liveFilters[e];for(var r=0;r<n.length;r++)i.removeFilterListeners(this.modelName,n[r])}},n.prototype.resetStaticFiltersOf=function(e){delete this.filterResults[e]}});structureJS.module("Route",function(e){{var t=this,n=Object.create(null),r=[],i=!1,a=function(){return!0},o=!1,l=function(){return!0},s=!1,u=function(){return!0},d=t.isDef(Storage)?sessionStorage:{},c=e("State"),p=e("DOM"),m=e("Map"),f=e("Interpolate");structureJS.circular()}return{routeTree:Object.create(null),buildRouteTree:function(e){for(var i=Object.create(null),a=Object.create(null),o=null,l="",s=null,u=null,d=!1,p=!1,m="",f=null,h=null,N=null,b=null,_="",g="",T="",E=0;E<e.length;E++){r.push(e[E]),f=e[E].route.trim().split("/"),_=e[E].target,g=e[E].partial,T=e[E].fallback,s=i,u=a;for(var A=0;A<f.length;A++)if(""!=f[A]&&"#"!=f[A]){if(h=t.NT_REGEX.test(f[A])?t.NON_TERMINAL:t.TERMINAL,N=A+1<f.length?f[A+1]:null,b=t.isNull(N)?null:t.NT_REGEX.test(N)?t.NON_TERMINAL:t.TERMINAL,h==t.NON_TERMINAL&&b==t.NON_TERMINAL)throw"ERROR: Route Contains two consecutive variables.";l=h==t.NON_TERMINAL?f[A]:f[A].toLowerCase(),o=t.NT_REGEX.test(f[A])?"NT":l,t.isDef(s[l])||(s[l]=Object.create(null),s[l].endOfChain=!1,s[l].thisVal=l,s[l].thisType=h,d=!0),s[l].lookaheadVal=b==t.NON_TERMINAL?N:"",s[l].lookaheadType=b,t.isDef(u[o])||(u[o]=Object.create(null),p=!0),s=s[l],u=u[o],m=e[E].route}if(!d&&1==s.endOfChain)throw'Error: Duplicate Route "'+e[E].route+'" Detected';if(!p)throw'Error: Ambiguous Route "'+e[E].route+'" Detected';s.endOfChain=!0,s.route=m,s.partial=t.isDef(g)?g:"",s.target=t.isDef(_)?_:"",s.fallback=t.isDef(T)?T:"",d=!1,p=!1}this.routeTree=n=i,c.hasDeclaredRoutes=!0},addRoute:function(e){r.push(e),this.buildRouteTree(r)},resolveRoute:function(e){var r=e.trim().split("/"),i=[],a="";routePart=n;for(var o=0;o<r.length;o++)if(""!=r[o]&&"#"!=r[o]&&(t.isDef(routePart.lookaheadType)&&routePart.lookaheadType==t.NON_TERMINAL?(a=routePart.lookaheadVal,i.push([a,r[o]])):a=r[o].toLowerCase(),routePart=routePart[a],!t.isDef(routePart)))throw'Error: Route "'+e+'" not found';if(1!=routePart.endOfChain)throw'Route "'+e+'" was only a partial match of declared routes.';return t.log("Route matched: "+e+" with "+routePart.route),routePart.nonTerminalValues=i,routePart},setAuthenticator:function(e){o===!1?(t.isFunc(e)&&(l=e),o=!0):t.log("ERROR: Authenticator already set")},setDeAuthenticator:function(e){s===!1?(t.isFunc(e)&&(u=e),o=!0):t.log("ERROR: DeAuthenticator already set")},setAuthorizer:function(e){i===!1?(t.isFunc(e)&&(a=e),i=!0):t.log("ERROR: Authenticator already set")},authorize:function(e){return a.call(d,e)},authenticate:function(e){return l.call(d,e)},logout:function(e){return u.call(d,e)},handleRoute:function(e){var n=p.getHashValue(e),r="",i=(document.getElementById(r),null),a=null,o=null;if(1==c.hasDeclaredRoutes)try{if(this.authorize.call(d,{route:n})!==!0)throw i=t.RESTRICTED,"User not authorized for url: "+e;i=Route.resolveRoute(n),i.target=t.isNullOrEmpty(i.target)?t.MAIN_CONTENT_ID:i.target,a=i.nonTerminalValues;for(var l=0;l<a.length;l++)o=a[l][0].split(":"),m.setAttribute(o[0],o[1],a[l][1]),f.interpolate(o[0],o[1],a[l][1])}catch(s){t.log(s)}return i},open:function(e){null!=(resolvedRouteObj=this.handleRoute(e))&&resolvedRouteObj!==t.RESTRICTED&&p.asynFetchRoutes(resolvedRouteObj,function(){c.ignoreHashChange=!0;var e,t=window.location.href;(e=t.indexOf("#"))>-1&&(t=window.location.href.slice(0,e)),window.location.href=t+resolvedRouteObj.route})},openPartial:function(e,n){var n=t.isDef(n)?n:t.MAIN_CONTENT_ID;t.isNullOrEmpty(e)||p.asynGetPartial(e,Bootstrap.loadPartialIntoTemplate,n)},isRoute:function(e){for(var t=!1,n=0;n<r.length;n++)r[n].route==e&&(t=!0);return t},getRouteObj:function(e){for(var t=null,n=0;n<r.length;n++)r[n].route==e&&(t=r[n]);return t},deferenceNestedRoutes:function(e,n){for(var r,i,a=null,o="",e=e.slice(0);null!=(a=e.shift());)(i=t.isString(a))&&(r=this.isRoute(a))?(o=this.getRouteObj(a),t.isArray(o.partial)?this.deferenceNestedRoutes(o.partial,n):n.push(o)):n.push(i?{partial:a,target:t.MAIN_CONTENT_ID}:a)}}});structureJS.module("Templar",function(e){var t=this,n=e("Map"),r=e("Route"),i=e("ModelHeader"),a=e("System"),o=(e("DOM"),e("Attribute")),l=e("Component"),s=function(){};return s._onloadHandlerMap=Object.create(null),s._components=Object.create(null),s._components.length=0,s._attributes=Object.create(null),s._attributes.length=0,s.success=function(e,n){var r,i=!0;if(t.isDef(this._onloadHandlerMap[e])||(this._onloadHandlerMap[e]=[]),t.isFunc(n)){for(var o=0;o<this._onloadHandlerMap[e].length;o++)r=this._onloadHandlerMap[e][o],i&=r.toString()!=n.toString();1==i&&this._onloadHandlerMap[e].push(n)}t.isFunc(e)&&a.setSystemListeners(t.SYSTEM_EVENT_TYPES.framework_loaded,function(){e.call(null)})},s.getPartialOnlodHandler=function(e){var n=[];return t.isDef(this._onloadHandlerMap[e])&&(n=this._onloadHandlerMap[e]),n},s.getModel=function(e){return n.getModel(e)},s.dataModel=function(e,t){n.initModel(new i(e,t))},s.Route=function(e){r.buildRouteTree(e)},s.setAuthorizer=function(e){r.setAuthorizer(e)},s.setAuthenticator=function(e){r.setAuthenticator(e)},s.setDeAuthenticator=function(e){r.setDeAuthenticator(e)},s.done=function(e){a.setSystemListeners(t.SYSTEM_EVENT_TYPES.link_done,e)},s.attribute=function(e,n){if(t.isString(e)&&t.isDef(n)){var r=new o(e.toLowerCase()),i=function(){},a=function(){};for(var l in n)if(n.hasOwnProperty(l))switch(l){case"onCreate":i=n.onCreate,r.onCreate=i=t.isFunc(i)?i:function(){};break;case"onChange":a=n.onChange,r.onChange=a=t.isFunc(a)?a:function(){}}r.onCreate=function(e){r.onChange.call(r,e,e.getAttribute(r.name)),i.call(r,e)},s._attributes[r.name]=r}},s.component=function(e,n){if(t.isString(e)&&t.isDef(n)){var r=new l;for(var i in n)if(n.hasOwnProperty(i))switch(i){case"templateURL":r.templateURL=n.templateURL,t.isNullOrEmpty(r.templateURL)&&t.log('WARNING: Component declaration for "'+e+'" ignored. Declaration must have a URL.');break;case"attributes":var a=n.attributes;try{r.attributes=t.isObject(a)?a:Object.create(null);for(var o in r.attributes)r.attributes[o]=t.isFunc(r.attributes[o])?r.attributes[o]:function(){}}catch(u){t.log('Component "attributes" is not an object'),r.attributes=Object.create(null)}break;case"onCreate":var d=n.onCreate;r.onCreate=t.isFunc(d)?d:function(){}}t.isNullOrEmpty(r.templateURL)||t.isDef(s._components[e.toLowerCase()])?t.log('WARNING: Component "'+e+'" is declared more than once. Only the last declaration will be used.'):(s._components[e.toLowerCase()]=r,s._components.length++)}},s.RouteObj=r,s.Map=n,window.Templar=s,s});structureJS.module("Bootstrap",function(e){var t=this,n=e("Map"),r=e("Link"),i=e("State"),a=e("Compile"),o=e("DOM"),l=e("Route"),s={setTarget:function(e){i.target=o.getDataAttribute(e.target,t.IE_TARGET_ATTRIB_KEY),i.target=t.isNullOrEmpty(i.target)?"":i.target},fireOnloads:function(e){for(var n="",r=null,a=e.split(","),o=!1,l=0;l<i.onloadFileQueue.length;l++)if(n=i.onloadFileQueue[l],a.forEach(function(e){o|=e==n}),1==o){n=i.onloadFileQueue.splice(l,1),r=Templar.getPartialOnlodHandler(n),t.log("Firing "+r.length+" handlers(s) for: "+n);for(var s=0;s<r.length;s++)r[s].call(null);l--}t.log("Un-Fired on queue: "+i.onloadFileQueue.toString())},bindTargetSetter:function(){var e=document.getElementsByTagName("a");if(null!=e)for(var t=0;t<e.length;t++)e[t].addEventListener("click",this.setTarget)},loadPartialIntoTemplate:function(){if(200==this.status){var e=this.responseText,o=this.fileName,u=t.isNullOrEmpty(this.targetId)?t.MAIN_CONTENT_ID:this.targetId.replace("#",""),d=t.isNull(this.targetNode)?document.getElementById(u):this.targetNode,c=(document.location.href,(new Date).getTime()),p=o+" "+c,m=this.callback||function(){};t.isNull(d)?(t.log('WARNING: TARGET NODE NOT FOUND FOR ROUTE "'+this.route+'".'),t.isNullOrEmpty(this.fallback)||(t.log('WARNING: ATTEMPTING FALLBACK ROUTE "'+this.fallback+'".'),l.open(this.fallback))):(d.innerHTML=e,t.log("Compiling <"+o+"> w/ scope <"+p+">"),i.compiledScopes+=p+",",a.compile(d,p),i.onloadFileQueue.unshift(this.fileName),m.call(this),i.compilationThreadCount<=0&&(n.pruneNodeTreeByScope(i.compiledScopes),r.bindModel(i.compiledScopes),s.fireOnloads(this.fileName),s.bindTargetSetter(),i.compilationThreadCount=0))}}};return s});structureJS.module("Export",function(e){function t(e){Interpolate.dispatchSystemListeners(r.SYSTEM_EVENT_TYPES.framework_loaded),System.removeSystemListeners(r.SYSTEM_EVENT_TYPES.framework_loaded),Bootstrap.bindTargetSetter(),r.log("Running bootstrap Complete: "+e)}function n(e){State.compiledScopes+=e+",",null!=(resolvedRouteObj=Route.handleRoute(window.location.href))&&(r.isNullOrEmpty(resolvedRouteObj.partial)||(routeContentNode=document.getElementById(resolvedRouteObj.target),defaultKey=DOM.getDataAttribute(routeContentNode,r.IE_DEFAULT_ATTRIB_KEY),r.isNull(routeContentNode)||r.isNullOrEmpty(defaultKey)||routeContentNode.setAttribute("data-"+r.IE_DEFAULT_ATTRIB_KEY,""),DOM.asynFetchRoutes(resolvedRouteObj,function(){r.log("asynFetchRoutes complete for "+resolvedRouteObj.route),t("ASYN FETCH ROUTES")}),State.blockBodyCompilation=!0)),0==State.blockBodyCompilation?(Compile.compile(document.getElementsByTagName("body")[0],e),Link.bindModel(State.compiledScopes),t("BODY COMPILATION")):r.log("WARNING: Body compilation has been blocked")}var r=this;DOM=e("DOM"),Map=e("Map"),State=e("State"),Bootstrap=e("Bootstrap"),Compile=e("Compile"),Templar=e("Templar"),Route=e("Route"),Link=e("Link"),Interpolate=e("Interpolate"),Process=e("Process"),System=e("System"),structureJS.done(function(){r.isDef(console)||(console={log:function(){}});var e=(document.getElementById("apl-content"),"body "+(new Date).getTime());window.onhashchange=function(){if(State.ignoreHashChange===!0)return void(State.ignoreHashChange=!1);var e=null;null!=(e=Route.handleRoute(window.location.href))&&DOM.asynFetchRoutes(e,function(){r.log("asynFetchRoutes complete for "+e.route)})};var t=Templar._components.length;for(cName in Templar._components)if("length"!==cName){var i,a=Templar._components[cName];i=function(){var t=this.targetNode,r=document.createElement("div"),i=r.getElementsByTagName("style"),a=document.getElementsByTagName("head")[0];State.compilationThreadCount--,r.innerHTML=this.responseText,t.transclude=r.getElementsByTagName("content").length>0;for(var o=0;o<i.length;o++)0==o?a.appendChild(i[o]):r.removeChild(i[o]);t.templateContent=r.innerHTML,--Templar._components.length<1&&n(e)},r.isNullOrEmpty(a.templateURL)||DOM.asynGetPartial(a.templateURL,i,"",a)}1>t&&n(e)})});