var structureJS="undefined"!=typeof structureJS?structureJS:{options:{download_minified:!1,minified_output_tag_id:"minified",log_priority:3},state:{dependencyTree:{},resolvedFileList:[],pmiFileOrder:[],declaredGroups:[],groupsInTLC:{},pmiFilesSelectedForExport:"",modules:{},cache:{structureJSTag:null},doneQueue:[]},decodeInfoObj:function(e){var t={name:""};if("string"==typeof e)t.name=e;else if("object"==typeof e){if("undefined"==typeof e.name)throw"Configuration Object Must Have Name Property";this.extend(t,e)}return t},module:function(e,t){function n(e){var t=null;return o.state.modules[e]&&(t=o.state.modules[e].module),t}if("undefined"==typeof e||"string"!=typeof e&&"object"!=typeof e)throw"Module Must Have Configuration Object Or Name String";if("undefined"==typeof t||"function"!=typeof t)throw"Module Must Have A Function As It's Definition";var o=this,i=null,u={type:"unknown"},r=null;if(i=this.decodeInfoObj(e),"undefined"!=typeof i.global_dependencies){if(r=i.global_dependencies,!Array.isArray(r))throw"ERROR: global_dependencies Property Of "+i.name+"s Configuration Object Must Be An Array.";for(var d=0;d<r.length;d++)if("undefined"==typeof window[r[d]])throw"ERROR: "+i.name+" Requires "+r[d]+" To Be In Global Namespace."}n.amd=n,n.getType=function(){var e=null;return o.state.modules[depName]&&(e=o.state.modules[depName].type),e},n._class=n,structureJS.require=n,u.module=t.call(structureJS.config.context,n),this.state.modules[i.name]=u},moduleAMD:function(e,t){var n={type:"amd",name:e};if(n.module=t.call(null).call(null),"undefined"==typeof n.module)throw"Module Function Definition Must Return Something";this.state.modules[e]=n},declare:function(e,t){if("string"!=typeof e)throw"Parameter 'name' must be a string.";"undefined"!=typeof t&&Array.isArray(t)||(t=[]),this.state.dependencyTree[e]=t},declareGroup:function(e){var t=this,n=this.decodeInfoObj(e);this.state.declaredGroups.push(n.name),this.declare(n.name),this[n.name]={};var o=this[n.name];o.state={dependencyTree:{},declaredGroups:[]},o.declare=function(e,n){t.declare.apply(o,[e,n])}},cache:function(e,t){var n=null;return 1==arguments.length&&this.state.cache[e]&&(n=this.state.cache[e]),2==arguments.length&&e&&t&&(this.state.cache[e]=t),n},setContext:function(e){this.config.context=e},extendContext:function(e){this.extend(this.config.context,e)},circular:function(e){if("undefined"==typeof e)return this.circular;var t=structureJS.state.modules[e],n=t.module;return n},done:function(e){this.state.doneQueue.push(e)}};!function(){window.define=function(){},window.define.amd={jQuery:!0},window.console&&0!=structureJS.options.log||(window.console={log:function(){},logf:function(){}})}();structureJS.module("Constants",function(){_=Object.create(null),_.MODEL_ATTRIB_KEY="aplAttrib",_.MODEL_ATTRIB_REPEAT_KEY="aplRepeat",_.TARGET_ATTRIB_KEY="aplTarget",_.CTRL_KEY="aplControl",_.CTRL_ATTRIB_STRING="data-apl-control",_.IE_MODEL_ATTRIB_KEY="apl-attrib",_.IE_MODEL_REPEAT_KEY="apl-repeat",_.IE_TARGET_ATTRIB_KEY="apl-target",_.IE_CTRL_ATTRIB_KEY="apl-control",_.IE_DEFAULT_ATTRIB_KEY="apl-default",_.CLASS_SEPARATOR=/,|\s/,_.NT_REGEX=/\w\:\w/,_.TEXT_NODE=3,_.ELEMENT_NODE=1,_.UNINDEXED=-1,_.NON_TERMINAL=0,_.TERMINAL=1,_.STACK=0,_.QUEUE=1,_.SYSTEM_EVENT_TYPES={system:"TMP_SYSTEM",interpolation_done:"interp_done",repeat_built:"repeat_built",LIST_TYPE:_.QUEUE},_.MODEL_EVENT_TYPES={interp_change:"i_change",select_change:"s_change",checkbox_change:"cb_change"},_.RESTRICTED="RESTRICTED",structureJS.extendContext(_)});structureJS.module("Util",function(){return _=Object.create(null),_.isDef=function(e){return"undefined"!=typeof e},_.isString=function(e){return _.isDef(e)&&"string"==typeof e},_.isFunc=function(e){return _.isDef(e)&&"function"==typeof e},_.isNull=function(e){return!_.isDef(e)||null==e},_.isObject=function(e){return _.isDef(e)&&Object.keys(e).length>0},_.isNullOrEmpty=function(e){return!_.isDef(e)||null===e||""===e},_.isArray=function(e){return!_.isNull(e)&&"string"!=typeof e&&_.isDef(e.length)},_.log=function(e){console.log(e)},structureJS.extendContext(_),_});structureJS.module("TMP_Node",function(){var e=this,t=function(n,i,o,r){return this instanceof t?(this.node=n,this.modelName=i,this.attribName=o,this.index=e.isDef(r)?r:-1,this.prop="",this.symbolMap=Object.create(null),this.hasNonTerminals=!1,this.embeddedControls=[],this.embeddedModelAttribs=Object.create(null),this.scope="",this.hasAttributes=!1,this.repeatModelName="",this.repeatAttribName="",this.repeatIndex=e.UNINDEXED,this.isComponent=!1,void(this.componentName="")):new t(n,id,i,o,r)};return t});structureJS.module("ModelHeader",function(){var e=this,t=structureJS.circular(),n=function(i,r){if(!(this instanceof n))return new n(r);this.modelName=i;for(var o in r)r.hasOwnProperty(o)&&Object.defineProperty(this,o,{set:function(n,i){return function(r){e.log("SET FIRED for "+i.modelName+"."+n),e.isDef(i.limitTable[n])&&delete i.limitTable[n],e.isDef(i.filterResults[n])&&delete i.filterResults[n],e.isDef(i.cachedResults[n])&&delete i.cachedResults[n],t("Map").setAttribute(i.modelName,n,r),t("Interpolate").interpolate(i.modelName,n,r)}}(o,this),get:function(e,t){return function(){return Map.getAttribute(t.modelName,e)}}(o,this)});this.attributes=r,this.cachedResults=Object.create(null),this.filterResults=Object.create(null),this.limitTable=Object.create(null),this.liveFilters=Object.create(null)};return n});structureJS.module("DOM",function(){return{modifyClasses:function(e,t,n){var i="",r=n.split(_.CLASS_SEPARATOR);if(!_.isNull(e)){i=e.getAttribute("class"),i=_.isNull(i)?"":i.trim();for(var s=0;s<r.length;s++)i=i.replace(r[s],"","g");e.setAttribute("class",i+" "+t)}},hideByIdList:function(e){var t=null,n=null;if(null!=e&&""!=e){n=e.split(_.CLASS_SEPARATOR);for(var i=0;i<n.length;i++)t=document.getElementById(n[i]),this.modifyClasses(t,"apl-hide","apl-show,apl-hide")}},appendTo:function(e,t){_.isDef(t)&&_.isDef(e)&&!_.isNull(t.parentNode)&&t.parentNode.insertBefore(e,e.nextSibling)},cloneAttributes:function(e,t){if(e.hasAttributes()){attributes=e.attributes;for(var n=0;n<attributes.length;n++)"data-apl-repeat"!=attributes[n].name&&"style"!=attributes[n].name&&t.setAttribute(attributes[n].name,attributes[n].value)}},isVisible:function(e){return _.isNull(e)?!1:e.offsetWidth>0&&e.offsetHeight>0},asynGetPartial:function(e,t,n,i){var r=new XMLHttpRequest;r.onload=t,r.fileName=e,r.targetId=n,r.targetNode=i,r.onreadystatechange=function(){4===r.readyState&&200!==r.status},_.isNullOrEmpty(r.fileName)||(r.open("get",e,!0),r.send())},insertAfter:function(e,t){var n=t.nextSibling,i=t.parentNode;return n?i.insertBefore(e,n):i.appendChild(e),e},splitText:function(e,t){var n=e.cloneNode(!1);return n.deleteData(0,t),e.deleteData(t,e.length-t),this.insertAfter(n,e),n},getHashValue:function(e){return _.isString(e)?e.substring(e.indexOf("#")).replace("#",""):""},getDataAttribute:function(e,t){var n=_.isString(t)?t.split("-"):[],i=null,r=n.slice(0,1).concat(n.slice(1).map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("");return _.isNull(e)||(i=_.isDef(e.dataset)?e.dataset[r]:e.getAttribute("data-"+t)),_.isNull(i)?"":i}}});structureJS.module("State",function(){return{preventUpdate:!1,target:"",aplHideList:"",compilationThreadCount:0,onloadFileQueue:[],hasDeclaredRoutes:!1,compiledScopes:""}});structureJS.module("Map",function(e){var t=this,n=Object.create(null),i=(Object.create(null),Object.create(null));i[t.SYSTEM_EVENT_TYPES.system]=Object.create(null),i[t.SYSTEM_EVENT_TYPES.system].listeners=Object.create(null);var r=e("TMP_Node");return{buildAttribAlias:function(e){return"_"+e},getRepeatBaseNodes:function(e,i){var r=[];return t.isDef(i)&&t.isDef(e)&&t.isDef(n[e])&&t.isDef(n[e][i])&&(r=n[e][i]),r},addRepeatBaseNode:function(e){t.isDef(n[e.modelName])||(n[e.modelName]=Object.create(null)),t.isDef(n[e.modelName][e.attribName])||(n[e.modelName][e.attribName]=[]),n[e.modelName][e.attribName].push(e)},exists:function(e){return t.isDef(i[e])},contains:function(e,n){if(!t.isArray(e))return!1;for(var i=!1,r=0;r<e.length;r++)if(e[r]===n){i=!0;break}return i},isInScopeList:function(e,n,i){var r=null,l=t.isDef(e)?e.split(" "):[],n=t.isDef(n)?n.split(","):[],i=t.isDef(i)?i:!1;if(inScope=!1,n.length>0){l=l.length>1?l:[null,null],r=n.map(function(e){var t=e.split(" ");return t.length>1?t:[null,null]});for(var s=0;s<r.length;s++)if(!t.isNullOrEmpty(l[0])&&!t.isNullOrEmpty(r[s][0])&&l[0]==r[s][0]){inScope=1==i?!0&&l[1]==r[s][1]:!0;break}}return inScope},forEach:function(e,n,r){var l=null,s=Object.create(null);if(s.modelName="",s.modelAtrribName="",s.hasAttributes=!1,s.stop=!1,s.target=null,s.targetCopy=null,s.key="",s.length=0,s.index=0,s.modelAttribIndex=0,s.modelAttribLength=0,s.removeItem=function(e){s.target.splice(e,1);for(var n=Object.create(null),e=0;e<s.target.length;e++)s.target[e].index>t.UNINDEXED&&(n[s.target[e].index]=!0);s.modelAttribLength=Object.keys(n).length,s.index--},t.isFunc(e)){r=e,l=i;for(var a in l)r.call(null,{modelName:a},a)}else if(!t.isFunc(e)&&t.isFunc(n)){r=n;l=t.isDef(i[e])&&t.isDef(i[e].nodeTable)?i[e].nodeTable:Object.create(null);for(var a in l)s.modelName=e,s.modelAtrribName=a,r.call(null,s,a)}else if(!t.isFunc(e)&&!t.isFunc(n)&&t.isFunc(r)){var o=null,u=Object.create(null);if(t.isDef(i[e].nodeTable[n])){s.target=i[e].nodeTable[n].nodes;for(var c=0;c<s.target.length;c++)s.target[c].index>t.UNINDEXED&&(u[s.target[c].index]=!0);for(s.modelAttribLength=Object.keys(u).length;s.index<s.target.length&&0==s.stop;s.index++)o=s.target[s.index],s.modelName=e,s.modelAtrribName=n,s.modelAttribIndex=o.index,s.key=a,s.hasAttributes=Object.keys(s.target[s.index].symbolMap).length>0?!0:!1,r.call(null,s,o)}}},pushNodes:function(e,n,l,s){var a=e;a instanceof r||(a=new r(e,n,l,s)),t.isDef(i[a.modelName].nodeTable[a.attribName])||(i[a.modelName].nodeTable[a.attribName]={nodes:[]}),i[a.modelName].nodeTable[a.attribName].nodes.push(a)},getPageSlice:function(e,n,i){var r=0,l=i.length,s=0,a=0,o=i;return t.isDef(e.limitTable[n])&&t.isArray(i)&&(a=e.limitTable[n].page,s=e.limitTable[n].limit,l=s*a<=i.length?s*a:i.length,r=l>a*s-s?a*s-s:0,o=i.slice(r,l)),o},getAttribute:function(e,n,r,l){if(!t.isDef(i[e]))return null;var s=null,a=i[e].api;return t.isDef(i[e])&&t.isDef(i[e].modelObj[n])&&(s=i[e].modelObj[n]),t.isDef(i[e].filterResults[n])&&(s=i[e].filterResults[n]),t.isDef(a.limitTable[n])&&a.limitTable[n].limit>0&&(s=this.getPageSlice(a,n,s)),t.isDef(i[e].cachedResults[n])&&(s=i[e].cachedResults[n]),t.isDef(r)&&t.isDef(l)&&t.isArray(s)&&t.isDef(s[r][l])?s=s[r][l]:t.isDef(r)&&t.isArray(s[r])&&t.isDef(s[r])&&(s=s[r]),s},setAttribute:function(e,n,r){var l=null;return t.isDef(i[e])&&t.isDef(i[e].modelObj[n])&&(i[e].modelObj[n]=r),l},getListeners:function(e,n){var r=[];return t.isDef(i[e].listeners[n])&&(r=i[e].listeners[n]),r},setListener:function(e,n,r,l){if(t.isFunc(r)){var s=r.toString(),a=s.length+s.charAt(s.length/2);t.isDef(l)&&1==l&&(a="_LIVE_FILTER_"+a+Math.random(),t.log("Adding duplicate with id "+a+" on "+e+"."+n)),t.isDef(i[e].listeners[n])||(i[e].listeners[n]=Object.create(null)),i[e].listeners[n][a]=r}},removeListener:function(e,t){delete i[e].listeners[t]},isDuplicateListener:function(e,t,n){var i=this.getListeners(e,t);for(var r in i)if(n.toString()==i[r].toString())return!0;return!1},removeFilterListeners:function(e,n){if(t.isDef(i[e].listeners[n])){var r=i[e].listeners[n];for(var l in r)0==l.indexOf("_LIVE_FILTER_")&&(t.log("REMOVING Listener with id: "+l),delete r[l])}},getModel:function(e){var t=null;return this.exists(e)&&(t=i[e].api),t},initModel:function(e){i[e.modelName]={modelObj:e.attributes,nodeTable:Object.create(null),api:e,listeners:Object.create(null),cachedResults:e.cachedResults,limitTable:e.limitTable,filterResults:e.filterResults}},pruneEmbeddedNodes:function(e,n,i,r){for(var l=this,s=Object.keys(e.embeddedModelAttribs),a=null,o=0;o<s.length;o++)t.isNullOrEmpty(s[o])||(a=s[o].split("."),l.forEach(a[0],a[1],function(e,l){l.repeatModelName==n&&l.repeatAttribName==i&&l.repeatIndex==r&&(e.removeItem(e.index),t.log("Pruning Embedded :"+l.node.tagName))}))},pruneNodeTreeByScope:function(e){if(!t.isNullOrEmpty(e)){var n=null,i=this;i.forEach(function(r){i.forEach(r.modelName,function(r){i.forEach(r.modelName,r.modelAtrribName,function(r,l){{var s=l.node;l.index}null!==(n=l.scope.split(" "))&&i.isInScopeList(l.scope,e)&&!i.isInScopeList(l.scope,e,!0)&&(r.removeItem(r.index),t.log("Pruning "+s.tagName+" for "+r.modelName+"."+r.modelAtrribName+" scope: "+n[0]+" "+n[1]))})})})}},getInternalModel:function(e){return results=null,this.exists(e)&&(results=i[e]),results},getMap:function(){return i},getRepeat:function(){return n}}});structureJS.module("System",function(e){var t=this,n=e("Map");return{setSystemListeners:function(e,i){var r=t.SYSTEM_EVENT_TYPES.system,s=n.getMap(),l=s[r].listeners[r];t.isFunc(i)&&(t.isDef(l)||(l=s[r].listeners[r]=Object.create(null)),t.isDef(l[e])||(l[e]=[]),l[e].push(i))},getSystemListeners:function(e){var i=t.SYSTEM_EVENT_TYPES.system,r=n.getMap(),s=r[i].listeners[i],l=[];return t.isNullOrEmpty(e)||t.isDef(s)&&t.isDef(s[e])&&(l=s[e]),l},removeSystemListeners:function(e){var i=t.SYSTEM_EVENT_TYPES.system,r=n.getMap(),s=r[i].listeners[i];t.isNullOrEmpty(e)||t.isDef(s)&&t.isDef(s[e])&&delete s[e]}}});structureJS.module("Process",function(e){var t=this,n=e("TMP_Node"),i=e("Map"),r=e("DOM");return{parseModelAttribName:function(e){var n=["",""];return t.isDef(e)&&(n=e.split(".")).length>1,n},buildNonTerminal:function(e,n,i,r){var i=t.isNullOrEmpty(i)?"":"."+i;return"{{"+e+"."+n+"["+r+"]"+i+"}}"},buildRepeatNonTerminal:function(e,n,i,r,l){var a=t.isNullOrEmpty(a)?"":a;return"{{"+e+"."+n+"["+l+"].zTMPzDOT"+i+"DOT"+r+"}}"},preProcessNodeAttributes:function(e,t){var r=null,l=null,a=/\{\{(\w+)\.(\w+)(\[(\d+)\])*(?:\.)*(\w+)*?\}\}/g,o=null,s=[];if(e.hasAttributes()&&"OPTION"!=e.tagName){r=e.attributes;for(var u=0;u<r.length;u++)if("style"!=r[u].name&&"class"!=r[u].name)for(;null!=(l=a.exec(r[u].value));)o=new n(e,l[1],l[2]),o.symbolMap[r[u].name]=r[u].value,o.scope=t,hasAttribNonTerminal=!0,i.pushNodes(o),Interpolate.updateNodeAttributes(o,o.modelName,o.attribName),s.push(o)}return s},preProcessRepeatNode:function(e,i){var l=null,a=null,o=null,s="",s="";if(intraCompilation="",idvRepeatedProperty=null,nonTerminal="",newDomNode=document.createElement(e.node.tagName.toLowerCase()),TMP_repeatedNode=new n(newDomNode,e.modelName,e.attribName,i),ctrlRegexResults=null,NONTERMINAL_REGEX=/(\{\{((\w+)\.(\w+))\}\})/g,ntFound=!1,Process=this,r.cloneAttributes(e.node,TMP_repeatedNode.node),TMP_repeatedNode.node.innerHTML=e.node.innerHTML,l=e.node.getAttribute("id"),l=null==l?"":TMP_repeatedNode.node.setAttribute("id",l+"-"+i),intraCompilation=TMP_repeatedNode.node.innerHTML,null!=(o=NONTERMINAL_REGEX.exec(TMP_repeatedNode.node.innerHTML))&&(e.embeddedModelAttribs[o[3]+"."+o[4]]=!0,nonTerminal=this.buildRepeatNonTerminal(o[3],o[4],e.modelName,e.attribName,i),TMP_repeatedNode.node.innerHTML=intraCompilation=intraCompilation.replace(o[0],nonTerminal)),null!=(a=TMP_repeatedNode.node.innerHTML.match(/\{\{(\$*\w+)*\}\}/g))){TMP_repeatedNode.hasNonTerminals=!0,s=intraCompilation=TMP_repeatedNode.node.innerHTML;for(var u=0;u<a.length;u++)(idvRepeatedProperty=/\{\{(\$*\w+)*\}\}/.exec(a[u]))&&("{{}}"==idvRepeatedProperty[0]&&(nonTerminal=this.buildNonTerminal(e.modelName,e.attribName,null,i),TMP_repeatedNode.node.innerHTML=intraCompilation=intraCompilation.replace(idvRepeatedProperty[0],nonTerminal)),"{{$index}}"==idvRepeatedProperty[0]&&(TMP_repeatedNode.node.innerHTML=intraCompilation=intraCompilation.replace(idvRepeatedProperty[0],i)),"{{}}"!=idvRepeatedProperty[0]&&"{{$index}}"!=idvRepeatedProperty[0]&&(nonTerminal=this.buildNonTerminal(e.modelName,e.attribName,idvRepeatedProperty[1],i),TMP_repeatedNode.node.innerHTML=intraCompilation=intraCompilation.replace(idvRepeatedProperty[0],nonTerminal)));intraCompilation=s}return TMP_repeatedNode.hasNonTerminals=0==TMP_repeatedNode.hasNonTerminals?!t.isNullOrEmpty(TMP_repeatedNode.node.innerHTML):TMP_repeatedNode.hasNonTerminals,TMP_repeatedNode},preProcessInputNode:function(e,l){var a=/(\{\{(\w+\.\w+)(\[(\d+)\])*(?:\.)*(\w+)*?\}\})/g,o=/(\{\{(\w+\.\w+)\}\})/g,s=null,u=null,d={},c="",m=e.getAttribute("type")||"";if(m=m.toLowerCase(),null!=(s=a.exec(e.getAttribute("value")))){if(t.isDef(s[3])&&t.isDef(c=s[5])&&c.indexOf("zTMPzDOT")==t.UNINDEXED)return;u=this.parseModelAttribName(s[2]),e.model=u[0],e.name=u[1]}else null!==(s=o.exec(e.getAttribute("value")))&&(u=Process.parseModelAttribName(matches[2]),e.model=u[0],e.name=u[1]);if("checkbox"==m||"radio"==m){var f=i.getAttribute(e.model,e.name),p=null,h=null,N="",b="";if(!t.isNull(f)&&t.isArray(f)&&null!==(h=e.parentNode)&&!t.isNullOrEmpty(l)){for(var T=0;T<f.length;T++)t.isString(f[T])?N=b=f[T]:(N=t.isDef(f[T].value)?f[T].value:N,b=t.isDef(f[T].description)?f[T].description:b),p=new n(document.createElement("input"),e.model,e.name,T),p.scope=l,p.node.model=p.modelName,p.node.name=p.attribName,r.cloneAttributes(e,p.node),p.node.setAttribute("value",N),t.isNullOrEmpty(c)||c.indexOf("zTMPzDOT")==t.UNINDEXED||(repeatAnnotationParts=c.split("DOT"),p.repeatModelName=repeatAnnotationParts[1],p.repeatAttribName=repeatAnnotationParts[2],p.repeatIndex=t.isDef(d.index)?parseInt(d.index):-1,p.index=t.UNINDEXED,p.prop=""),r.appendTo(p.node,h),r.appendTo(document.createTextNode(b),p.node),p.node.addEventListener("click",function(e){Interpolate.dispatchListeners(i.getListeners(this.model,this.name),{type:t.MODEL_EVENT_TYPES.checkbox_change,checked:e.target.checked===!0,value:e.target.value})}),i.pushNodes(p);h.removeChild(e)}}else e.addEventListener("keyup",function(e){i.setAttribute(this.model,this.name,e.target.value),Interpolate.interpolate(this.model,this.name,e.target.value)})},preProcessNode:function(e,l,a,o){if(t.isDef(e)&&null!==e){var s=r.getDataAttribute(e,t.IE_MODEL_REPEAT_KEY),u=t.isNullOrEmpty(s)?e.tagName:"REPEAT",d=null,c=/(\{\{(\w+\.\w+)\}\})/g,m=null,f=null,p=null,h=null,N=null,b=!0,T=this;switch(u){case"SELECT":if(null===(m=c.exec(e.innerHTML)))break;if(e.innerHTML="",f=T.parseModelAttribName(m[2]),d=i.getAttribute(f[0],f[1]),e.model=f[0],e.name=f[1],h=new n(e,f[0],f[1]),h.scope=o,i.pushNodes(h),e.children.length<1)for(var g=0;g<d.length;g++)N=new n(document.createElement("option"),f[0],f[1],g),N.scope=o,N.node.text=T.buildNonTerminal(f[0],f[1],"text",g),N.node.value=T.buildNonTerminal(f[0],f[1],"value",g),e.appendChild(N.node),e.selectedIndex=t.isDef(d[g].selected)&&1==d[g].selected?g:e.selectedIndex,i.pushNodes(N);e.addEventListener("change",function(e){Interpolate.dispatchListeners(i.getListeners(this.model,this.name),{type:t.MODEL_EVENT_TYPES.select_change,value:e.target.options[e.target.selectedIndex].value,text:e.target.options[e.target.selectedIndex].text,index:e.target.selectedIndex})});break;case"INPUT":this.preProcessInputNode(e,o);break;case"REPEAT":d=i.getAttribute(l,a),e.model=l,e.name=a,p=new n(e,l,a),p.scope=o,i.addRepeatBaseNode(p),i.pushNodes(p),b=!1}return this.preProcessNodeAttributes(e,o),b}}}});structureJS.module("Interpolate",function(e){var t=this,n=e("TMP_Node"),i=e("Map"),r=e("DOM"),a=e("Process"),l=e("System"),o=structureJS.circular();return{dispatchListeners:function(e,n){if(t.isDef(e))for(var i in e)t.isFunc(e[i])&&e[i].call(null,n)},dispatchSystemListeners:function(e){if(!t.isNullOrEmpty(e)){{var n=l.getSystemListeners(e);t.SYSTEM_EVENT_TYPES.system}if(t.SYSTEM_EVENT_TYPES.LIST_TYPE==t.QUEUE)for(var i=0;i<n.length;i++)t.isFunc(n[i])&&n[i].call(null);else if(t.SYSTEM_EVENT_TYPES.LIST_TYPE==t.STACK)for(var i=n.length-1;i>=0;i--)t.isFunc(n[i])&&n[i].call(null)}},updateNodeAttributes:function(e,n,r){var l=Object.create(null),o=e.node;if(o.hasAttributes()&&0==e.isComponent){for(var s,d,u=/(\{\{(\w+\.\w+)(\[(\d+)\])*(?:\.)*(\w+)*?\}\})/g,c=null,p="",m="",f="",N="",h=o.attributes,b=0;b<h.length;b++)if(f=h[b].name,m=t.isDef(e.symbolMap[f])?e.symbolMap[f]:"",t.isDef(m)&&u.test(m)){for(u.lastIndex=0;null!=(c=u.exec(m));)modelNameParts=a.parseModelAttribName(c[2]),N=i.getAttribute(modelNameParts[0],modelNameParts[1],c[4],c[5]),p=m.replace(c[1],N),m=p;o.setAttribute(f,p),l[f]=p}}else 1==e.isComponent&&(s=Templar._components[e.componentName],(d=Object.keys(e.symbolMap)).length>0&&!t.isNullOrEmpty(attribVal=i.getAttribute(n,r))&&o.setAttribute(d[0],attribVal));return l},interpolateSpan:function(e,n){var i=e.node;t.isNullOrEmpty(e.prop)&&e.index>=0&&t.isDef(n[e.index])&&e.index<n.length?i.innerText=i.innerHTML=n[e.index]:t.isNullOrEmpty(e.prop)&&e.index==t.UNINDEXED?i.innerText=i.innerHTML=n:!t.isNullOrEmpty(e.prop)&&e.index>=0&&t.isDef(n[e.index])&&e.index<n.length&&(i.innerText=i.innerHTML=n[e.index][e.prop])},getPageSlice:function(e,n,i){var r=0,a=i.length,l=0,o=0,s=i;return t.isDef(e.limitTable[n])&&(o=e.limitTable[n].page,l=e.limitTable[n].limit,a=l*o<=i.length?l*o:i.length,r=a>o*l-l?o*l-l:0,s=i.slice(r,a)),s},getPageSliceData:function(e,n,i){var r=0,a=i.length,l=0,o=0,s=Object.create(null);return s.start=-1,s.length=0,t.isDef(e.limitTable[n])&&(o=e.limitTable[n].page,l=e.limitTable[n].limit,a=l*o<=i.length?l*o:i.length,r=a>o*l-l?o*l-l:0,s.start=r,s.length=a),s},interpolate:function(e,s,d,u){if(i.exists(e)){t.log("Attemping Interpolation "+e+"."+s+" for scopes "+u);listeners=i.getListeners(e,s),Interpolate=this,attribCurrState=i.getAttribute(e,s),updateObject=Object.create(null),numNodesToAdd=0,numNodesToRemove=0,newNodeStartIndex=0,TMP_repeatBaseNode=null,updateObj=Object.create(null),nodeScopeParts=null,node=null,tagName="",i.forEach(e,s,function(c,p){if(t.isDef(u)&&!i.isInScopeList(p.scope,u))return void t.log("Not Interpolating "+e+"."+s+" for scope <"+p.scope+"> not in <"+u+">");switch(node=p.node,tagName=1==p.isComponent?"COMPONENT":node.tagName,1==c.hasAttributes&&(updateObject=Interpolate.updateNodeAttributes(p,e,s)),tagName){case"SELECT":if(t.isArray(d)&&d.length>c.modelAttribLength)for(var m=d.length-c.modelAttribLength,f=d.length-m,N=0;m>N;N++,f++,c.modelAttribLength++){var h=new n(document.createElement("option"),e,s,f);h.node.text=d[f].text,h.node.value=d[f].value,node.appendChild(h.node),h.scope=p.scope,i.pushNodes(h)}break;case"OPTION":t.isArray(d)&&(d.length<=c.modelAttribLength&&c.modelAttribIndex<d.length&&(node.text=d[c.modelAttribIndex].text,node.value=d[c.modelAttribIndex].value,node.parentNode.selectedIndex=t.isDef(d[c.modelAttribIndex].selected)&&1==d[c.modelAttribIndex].selected?c.modelAttribIndex:node.parentNode.selectedIndex),updateObj.value=node.parentNode.options[node.parentNode.selectedIndex].value,updateObj.text=node.parentNode.options[node.parentNode.selectedIndex].text,updateObj.type=t.MODEL_EVENT_TYPES.interp_change,updateObj.index=node.parentNode.selectedIndex,c.modelAttribIndex>=d.length&&(c.removeItem(c.index),node.parentNode.removeChild(node)));break;case"SPAN":Interpolate.interpolateSpan(p,d),updateObj.text=node.innerText,updateObj.type=node.tagName.toLowerCase();break;case"INPUT":updateObj.text=node.value,updateObj.type=node.tagName.toLowerCase();break;case"COMPONENT":break;default:var b=null,T=c,g=null;i.forEach(e,s,function(e,n){e.removeItem(e.index),!t.isNull(n.node.parentNode)&&n.index>t.UNINDEXED&&n.node.parentNode.removeChild(n.node)}),g=i.getRepeatBaseNodes(e,s);for(var E=0;E<g.length;E++){if(TMP_repeatBaseNode=g[E],r.isVisible(TMP_repeatBaseNode.node.parentNode))for(var _=0;_<d.length;_++)i.pruneEmbeddedNodes(TMP_repeatBaseNode,e,s,_),b=a.preProcessRepeatNode(TMP_repeatBaseNode,_),b.scope=TMP_repeatBaseNode.scope,i.pushNodes(b),0==b.hasNonTerminals&&(b.node.innerHTML=d[_]),r.appendTo(b.node,TMP_repeatBaseNode.node),o("Compile").compile(b.node,TMP_repeatBaseNode.scope);TMP_repeatBaseNode.node.setAttribute("style","display:none;")}Interpolate.dispatchSystemListeners(t.SYSTEM_EVENT_TYPES.repeat_built),l.removeSystemListeners(t.SYSTEM_EVENT_TYPES.repeat_built),T.stop=!0,updateObj.type="repeat",updateObj.value=d}}),t.isDef(updateObj.type)&&Interpolate.dispatchListeners(listeners,updateObj)}}}});structureJS.module("Compile",function(e){var t=this,n=e("TMP_Node"),i=(e("ControlNodeHeader"),e("Map")),r=e("DOM"),l=e("Interpolate"),a=e("Process"),o=e("State"),s=structureJS.circular();return{compile:function(e,d){if(t.isNull(e)||t.isNull(e.childNodes))return d;var u=e.getAttribute("data-apl-default");t.isNullOrEmpty(u)||(e.setAttribute("data-apl-default",""),o.compilationThreadCount++,o.onloadFileQueue.push(u),r.asynGetPartial(u,s("Bootstrap").loadPartialIntoTemplate,null,e),t.log("Spawning Thread <"+u+"> w/ target <"+e.id+"> w/ scope <"+d+">"));for(var c=e.childNodes,p=[],m=null,f=null,N=null,h=null,T=null,b=[null,null],g=null,E=null,_=0,A=-1,v="",y="",D="",O="",M="",S=!1,x=/(\{\{(\w+\.\w+)(\[(\d+)\])*(?:\.)*(\w+)*?\}\})/g,P=0;P<c.length;P++)if(h=c[P],N=h.parentNode,h.nodeType!=t.TEXT_NODE||t.isNull(N)||"OPTION"===N.tagName){if(h.nodeType==t.ELEMENT_NODE){var I,L,R=h.tagName.toLowerCase(),C=Templar._components[R],w=null,j=null;if(t.isDef(C)&&!t.isNullOrEmpty(C.templateContent)&&!t.isNull(h.parentNode)){t.log("Is Defined Component: "+h.tagName),1==C.transclude&&(L=C.templateContent.replace("<content></content>",h.innerHTML)),h.insertAdjacentHTML("afterend",L),w=h.nextElementSibling,w.tmp_component=C,r.cloneAttributes(h,w),j=a.preProcessNodeAttributes(w,d);var Y=w.setAttribute;w.setAttribute=function(e,n){var i,r=this.tmp_component;t.isFunc(i=r.attributes[e])&&i.call(null,this,n),Y.call(this,e,n)};for(var k=0;k<j.length;k++)j[k].isComponent=!0,j[k].componentName=R;for(attrib in C.attributes)t.isNullOrEmpty(I=h.getAttribute(attrib))||C.attributes[attrib].call(null,w,I);C.onCreate.call(null,w),h.parentNode.removeChild(h),h=null}var V=r.getDataAttribute(h,t.IE_MODEL_REPEAT_KEY);t.isNullOrEmpty(V)||(b=a.parseModelAttribName(V),D=b[0],O=b[1]),S=a.preProcessNode(h,D,O,d),1==S&&this.compile(h,d)}}else{for(v=h.wholeText;null!=(T=x.exec(v));)b=a.parseModelAttribName(T[2]),p.push({start:T.index,end:x.lastIndex,modelName:b[0],attribName:b[1],fullToken:T[1],index:T[4],propertyName:T[5]});for(var B=0;B<p.length;B++){y=N.tagName,D=p[B].modelName,O=p[B].attribName;var f=document.createElement("span");if(M=p[B].propertyName,A=t.isDef(p[B].index)?parseInt(p[B].index):-1,E=new n(f,D,O,A),E.prop=M,t.isNullOrEmpty(M)||M.indexOf("zTMPzDOT")==t.UNINDEXED||(g=M.split("DOT"),E.repeatModelName=g[1],E.repeatAttribName=g[2],E.repeatIndex=A,E.index=t.UNINDEXED,E.prop=""),E.scope=d,m=r.splitText(h,p[B].start-_),_+=h.nodeValue.length,m.nodeValue.trim()==p[B].fullToken&&(E.node.innerText=m.nodeValue,l.interpolateSpan(E,i.getAttribute(D,O)),N.replaceChild(E.node,m),i.pushNodes(E)),h.nodeValue.trim()==p[B].fullToken&&(E.node.innerText=h.nodeValue,l.interpolateSpan(E,i.getAttribute(D,O)),N.replaceChild(E.node,h),i.pushNodes(E)),h=c[++P],h.nodeType!=t.TEXT_NODE)break;if(m=r.splitText(h,p[B].end-_),_+=h.nodeValue.length,m.nodeValue.trim()==p[B].fullToken&&(E.node.innerText=m.nodeValue,l.interpolateSpan(E,i.getAttribute(D,O)),N.replaceChild(E.node,m),i.pushNodes(E)),h.nodeValue.trim()==p[B].fullToken&&(E.node.innerText=h.nodeValue,l.interpolateSpan(E,i.getAttribute(D,O)),N.replaceChild(E.node,h),i.pushNodes(E)),h=c[++P],h.nodeType!=t.TEXT_NODE)break}p.length=0,_=0}return d}}});structureJS.module("Link",function(e){var t=this,n=e("Map"),i=e("Interpolate"),r=e("System");return{bindModel:function(e){Object.create(null);n.forEach(function(t,r){n.forEach(r,function(t){i.interpolate(t.modelName,t.modelAtrribName,n.getAttribute(t.modelName,t.modelAtrribName),e)})}),State.compiledScopes="",i.dispatchSystemListeners(t.SYSTEM_EVENT_TYPES.interpolation_done),r.removeSystemListeners(t.SYSTEM_EVENT_TYPES.interpolation_done)}}});structureJS.module("ModelAPI",function(e){var t=this,n=e("ModelHeader"),i=e("Map"),r=e("Interpolate");n.prototype.softset=function(e,n){this.cachedResults[e]=n,r.interpolate(this.modelName,e,n),delete this.cachedResults[e],t.isDef(this.limitTable[e])&&(this.limitTable[e].page=1)},n.prototype.update=function(e){r.interpolate(this.modelName,e,i.getAttribute(this.modelName,e))},n.prototype.listen=function(e,t){i.isDuplicateListener(this.modelName,e,t)||i.setListener(this.modelName,e,t)},n.prototype.unlisten=function(e){i.removeListener(this.modelName,e)}});structureJS.module("ModelFilter",function(e){var t=this,n=e("ModelHeader"),i=e("Map"),r=e("Interpolate");n.prototype.sort=function(e,n){var l=Object.create(null),a=this,o=t.isDef(a.limitTable[e])?a.limitTable[e].page:0,s=0,u=-1,d=1,p=0;return l.target=i.getAttribute(a.modelName,e),t.isDef(n)&&n>0&&t.isDef(a.limitTable[e])&&(o=a.limitTable[e].page,a.limitTable[e].page=n,l.target=i.getPageSlice(a,e,l.target)),l.propName="",l.prevProps=[],l.insertSortedSlice=function(e,n,l,a){if(t.isDef(n.limitTable[l])){n.limitTable[l].page=t.isDef(a)?a:o,s=n.limitTable[l].limit,n.limitTable[l].limit=0;var u=i.getAttribute(n.modelName,l);n.limitTable[l].limit=s;var d=r.getPageSliceData(n,l,u),p=null;if(d.start>-1&&!t.isNull(e)){p=u.slice(0);for(var c=0,m=d.start;c<e.length&&m<d.length;c++,m++)p[m]=e[c];i.setAttribute(n.modelName,l,p.slice(0)),n.limitTable[l].page=o}}},l.sorter=function(e,n){var i=e,r=n,e=t.isNull(l.propName)?e:e[l.propName],n=t.isNull(l.propName)?n:n[l.propName],a=parseInt(e),o=parseInt(n),s=!0,c=p;if(!t.isDef(e)||!t.isDef(n))return p;for(var m=0;m<l.prevProps.length;m++)s&=i[l.prevProps[m]]==r[l.prevProps[m]];return e=isNaN(a)?e:a,n=isNaN(o)?n:o,c=n==e?p:e>n?d:u,c=1==s?c:p},l.orderBy=function(t){return l.propName=t,l.target.sort(l.sorter),l.insertSortedSlice(l.target,a,e,n),l.prevProps.push(t),l},l.thenBy=function(t){return l.propName=t,l.target.sort(l.sorter),l.insertSortedSlice(l.target,a,e,n),l.prevProps.push(t),l},l},n.prototype.sortCurrentPageOf=function(e){var n=(Object.create(null),this),i=n.limitTable[e];return t.isDef(i)?n.sort(e,i.currentPage):void 0}});structureJS.module("ModelFilter",function(e){var t=this,n=e("ModelHeader"),i=e("Map"),r=e("Interpolate");n.prototype.limit=function(e){var n=Object.create(null),r=this,a=0,l=0;return n.to=function(n){n>0?(delete r.limitTable[e],a=i.getAttribute(r.modelName,e),t.isArray(a)&&(l=Math.floor(a.length/n),l+=a.length%n>0?1:0,r.limitTable[e]={limit:n,page:1,totalPages:l,currentPage:1},r.update(e))):delete r.limitTable[e]},n},n.prototype.gotoPage=function(e){var n=Object.create(null),a=this,l=null;return n.of=function(n){l=a.limitTable[n],t.isDef(l)&&e>0&&e<=l.totalPages&&(l.page=l.currentPage=e,r.interpolate(a.modelName,n,i.getAttribute(a.modelName,n)))},n},n.prototype.gotoNextPageOf=function(e){var n=this,i=n.limitTable[e];t.isDef(i)&&i.currentPage+1<=i.totalPages&&n.gotoPage(++i.currentPage).of(e)},n.prototype.gotoPreviousPageOf=function(e){var n=this,i=n.limitTable[e];t.isDef(i)&&i.currentPage-1>0&&n.gotoPage(--i.currentPage).of(e)},n.prototype.currentPageOf=function(e){var n=this,i=n.limitTable[e],r=0;return t.isDef(i)&&(r=i.currentPage),r},n.prototype.totalPagesOf=function(e){var n=this,i=n.limitTable[e],r=0;return t.isDef(i)&&(r=i.totalPages),r}});structureJS.module("ModelFilter",function(e){var t=this,n=e("ModelHeader"),i=e("Map"),r=e("Interpolate");n.prototype.filterWarapper=function(e,n,l,a,o,s,u){if(t.isDef(o)&&1==o&&delete this.cachedResults[e],t.isDef(u)&&1==u)return 0==a.call(null,l)?(t.isNullOrEmpty(l)&&r.interpolate(this.modelName,e,i.getAttribute(this.modelName,e)),!1):!0;var d=this,p=[],c=i.getAttribute(d.modelName,e),m=null,f=null;if(c=i.getPageSlice(d,e,c),t.isArray(c)){for(var N=0;N<c.length;N++)f=c[N],itemValue=!t.isNullOrEmpty(n)&&t.isDef(f[n])?f[n]:f,m=1==s?a.call(null,itemValue):a.call(null,l,itemValue),1==m&&p.push(f);p.length<1?(delete d.cachedResults[e],1==o&&(p=i.getAttribute(d.modelName,e),r.interpolate(d.modelName,e,p))):(d.cachedResults[e]=p,t.isDef(s)&&1==s&&(d.filterResults[e]=p),r.interpolate(d.modelName,e,p))}return!0},n.prototype.filter=function(e){var n=Object.create(null),r=this,l=!0,a=void 0;return n.propName="",n.isStatic=!1,n.liveAndFuncs=[],n.using=function(o){return t.isFunc(o)?(l=!1,a=!0,n.isStatic=!0,r.filterWarapper(e,n.propName,null,o,l,a)):(t.isDef(r.liveFilters[e])||(r.liveFilters[e]=[]),r.liveFilters[e].push(o),i.setListener(r.modelName,o,function(i){l=n.liveAndFuncs.length<1;for(var o=!0,s=!1,u=0;u<n.liveAndFuncs.length&&1==o;u++){var d=1==n.liveAndFuncs[u].length;o=n.liveAndFuncs[u].funct.call(null,i.text,n.propName,d),s|=!d}t.log("defaultFilterOverride: "+s),1==o&&0==s&&r.filterWarapper(e,n.propName,i.text,function(e,n){return!t.isNullOrEmpty(n)&&!t.isNullOrEmpty(e)&&0==n.toString().toLowerCase().indexOf(e.toLowerCase())},l,a)},!0)),n},n.by=function(e){return n.propName=e,n},n.and=function(i){return t.isFunc(i)&&(n.liveAndFuncs.push({funct:function(t,o,s){return a=n.isStatic,l=s,r.filterWarapper(e,o,t,i,l,a,s)},length:i.length}),n.liveAndFuncs.sort(function(e){return 1!=e.funct.length}),l=!1,a=n.isStatic,1==(a=n.isStatic)&&r.filterWarapper(e,n.propName,null,i,l,a)),n},n},n.prototype.resetLiveFiltersOf=function(e){var n=null;if(t.isDef(this.liveFilters[e])){n=this.liveFilters[e];for(var r=0;r<n.length;r++)i.removeFilterListeners(this.modelName,n[r])}},n.prototype.resetStaticFiltersOf=function(e){delete this.filterResults[e]}});structureJS.module("Route",function(e){{var t=this,n=Object.create(null),r=!1,i=function(){return!0},l=!1,a=function(){return!0},o={},s=e("State"),u=e("DOM"),d=e("Map"),c=e("Interpolate");e("Bootstrap")}return{routeTree:Object.create(null),buildRouteTree:function(e){for(var r=Object.create(null),i=Object.create(null),l=null,a="",o=null,u=null,d=!1,c=!1,p="",m=null,f=null,N=null,h=null,g="",b="",T=0;T<e.length;T++){m=e[T].route.trim().split("/"),g=e[T].target,b=e[T].partial,o=r,u=i;for(var E=0;E<m.length;E++)""!=m[E]&&"#"!=m[E]&&(f=t.NT_REGEX.test(m[E])?t.NON_TERMINAL:t.TERMINAL,N=E+1<m.length?m[E+1]:null,h=t.isNull(N)?null:t.NT_REGEX.test(N)?t.NON_TERMINAL:t.TERMINAL,a=f==t.NON_TERMINAL?m[E]:m[E].toLowerCase(),l=t.NT_REGEX.test(m[E])?"NT":a,t.isDef(o[a])||(o[a]=Object.create(null),o[a].endOfChain=!1,o[a].lookaheadVal=h==t.NON_TERMINAL?N:"",o[a].lookaheadType=h,d=!0),t.isDef(u[l])||(u[l]=Object.create(null),c=!0),o=o[a],u=u[l],p=e[T].route);if(!d&&1==o.endOfChain)throw'Error: Duplicate Route "'+e[T].route+'" Detected';if(!c)throw'Error: Ambiguous Route "'+e[T].route+'" Detected';o.endOfChain=!0,o.route=p,o.partial=t.isDef(b)?b:"",o.target=t.isDef(g)?g:"",d=!1,c=!1}this.routeTree=n=r,s.hasDeclaredRoutes=!0},resolveRoute:function(e){var r=e.trim().split("/"),i=[],l="";routePart=n;for(var a=0;a<r.length;a++)if(""!=r[a]&&"#"!=r[a]&&(t.isDef(routePart.lookaheadType)&&routePart.lookaheadType==t.NON_TERMINAL?(l=routePart.lookaheadVal,i.push([l,r[a]])):l=r[a].toLowerCase(),routePart=routePart[l],!t.isDef(routePart)))throw'Error: Route "'+e+'" not found';if(1!=routePart.endOfChain)throw'Route "'+e+'" was only a partial match of declared routes.';return t.log("Route matched: "+e+" with "+routePart.route),routePart.nonTerminalValues=i,routePart},setAuthenticator:function(e){l===!1?(t.isFunc(e)&&(a=e),l=!0):t.log("ERROR: Authenticator already set")},setAuthorizer:function(e){r===!1?(t.isFunc(e)&&(i=e),r=!0):t.log("ERROR: Authenticator already set")},authorize:function(e){return i.call(o,e)},authenticate:function(e){return a.call(o,e)},handleRoute:function(e){var n=u.getHashValue(e),r="",i=(document.getElementById(r),null),l=null,a=null;if(1==s.hasDeclaredRoutes)try{if(this.authorize.call(null,{route:n})!==!0)throw i=t.RESTRICTED,"User not authorized for url: "+e;i=Route.resolveRoute(n),i.target=t.isNullOrEmpty(i.target)?"apl-content":i.target,l=i.nonTerminalValues;for(var o=0;o<l.length;o++)a=l[o][0].split(":"),d.setAttribute(a[0],a[1],l[o][1]),c.interpolate(a[0],a[1],l[o][1])}catch(p){t.log(p)}return i}}});structureJS.module("Templar",function(e){var t=this,n=e("Map"),r=e("Route"),i=e("ModelHeader"),l=e("System"),a=(e("DOM"),function(){});return a._onloadHandlerMap=Object.create(null),a._components=Object.create(null),a._components.length=0,a.Component=function(e,t,n){return this instanceof a.Component?(this.attributes=e||Object.create(null),this.onCreate=t||function(){},this.templateURL=n||"",this.templateContent="",this.templateStyle=null,void(this.transclude=!1)):new a.Component},a.success=function(e,n){t.isDef(this._onloadHandlerMap[e])||(this._onloadHandlerMap[e]=[]),t.isFunc(n)&&this._onloadHandlerMap[e].push(n),t.isFunc(e)&&l.setSystemListeners(t.SYSTEM_EVENT_TYPES.interpolation_done,function(){e.call(null)})},a.getPartialOnlodHandler=function(e){var n=[];return t.isDef(this._onloadHandlerMap[e])&&(n=this._onloadHandlerMap[e]),n},a.getModel=function(e){return n.getModel(e)},a.dataModel=function(e,t){n.initModel(new i(e,t))},a.Route=function(e){r.buildRouteTree(e)},a.setAuthorizer=function(e){r.setAuthorizer(e)},a.setAuthenticator=function(e){r.setAuthenticator(e)},a.component=function(e,n){if(t.isString(e)&&t.isDef(n)){var r=new a.Component;for(var i in n)if(n.hasOwnProperty(i))switch(i){case"templateURL":var l=n.templateURL;t.isNullOrEmpty(l)?t.log('Component "'+e+'" ignored. Declaration must have a URL.'):(r.templateURL=l,a._components.length++);break;case"attributes":var o=n.attributes;try{r.attributes=t.isObject(o)?o:Object.create(null);for(var s in r.attributes)r.attributes[s]=t.isFunc(r.attributes[s])?r.attributes[s]:function(){}}catch(u){t.log('Component "attributes" is not an object'),r.attributes=Object.create(null)}break;case"onCreate":var d=n.onCreate;r.onCreate=t.isFunc(d)?d:function(){}}a._components[e.toLowerCase()]=r}},a.RouteObj=r,a.Map=n,window.Templar=a,a});structureJS.module("Bootstrap",function(e){var t=this,n=e("Map"),r=e("Link"),i=e("State"),l=e("Compile"),a=e("DOM"),o={setTarget:function(e){i.target=a.getDataAttribute(e.target,t.IE_TARGET_ATTRIB_KEY),i.target=t.isNullOrEmpty(i.target)?"":i.target},fireOnloads:function(){for(var e="",t=null;e=i.onloadFileQueue.pop();){t=Templar.getPartialOnlodHandler(e);for(var n=0;n<t.length;n++)t[n].call(null)}},bindTargetSetter:function(){var e=document.getElementsByTagName("a");if(null!=e)for(var t=0;t<e.length;t++)e[t].addEventListener("click",this.setTarget)},loadPartialIntoTemplate:function(){var e=this.responseText,s=this.fileName,u=t.isNullOrEmpty(this.targetId)?"apl-content":this.targetId.replace("#",""),d=t.isNull(this.targetNode)?null:this.targetNode,c=null,p=null,m=(document.location.href,(new Date).getTime()),f=s+" "+m;t.isNull(d)?null!=(d=document.getElementById(u))&&(d.innerHTML=e):d.innerHTML=e,c=document.getElementById("apl-hide"),nodesPreviouslyHidden=i.aplHideList.split(t.CLASS_SEPARATOR);for(var h=0;h<nodesPreviouslyHidden.length;h++)p=document.getElementById(nodesPreviouslyHidden[h]),a.modifyClasses(p,"apl-show","apl-show,apl-hide");t.isNull(c)||(i.aplHideList=c.getAttribute("data-apl-hide"),a.hideByIdList(i.aplHideList)),t.log("Compiling <"+s+"> w/ scope <"+f+">"),i.compilationThreadCount--,i.compiledScopes+=f+",",l.compile(d,f),a.modifyClasses(d,"apl-show","apl-hide,apl-show"),i.compilationThreadCount<=0&&(n.pruneNodeTreeByScope(i.compiledScopes),o.fireOnloads(),r.bindModel(i.compiledScopes),o.bindTargetSetter(),i.compilationThreadCount=0)}};return o});structureJS.module("Export",function(e){function t(e){var t;Compile.compile(document.getElementsByTagName("body")[0],e),Link.bindModel(State.compiledScopes),Bootstrap.bindTargetSetter();var r=document.querySelectorAll(".apl-default-hidden");if(!n.isNull(r))for(var i=0;i<r.length;i++)t=r[i],DOM.modifyClasses(t,"","apl-default-hidden");n.log("Body COMPILATION DONE")}var n=this;DOM=e("DOM"),Map=e("Map"),State=e("State"),Bootstrap=e("Bootstrap"),Compile=e("Compile"),Templar=e("Templar"),Route=e("Route"),Link=e("Link"),Interpolate=e("Interpolate"),Process=e("Process"),structureJS.done(function(){n.isDef(console)||(console={log:function(){}});var e=(document.getElementById("apl-content"),"body "+(new Date).getTime()),r=null,i=null,l="";window.onhashchange=function(){var e="",t=null;null!=(t=Route.handleRoute(window.location.href))?(State.onloadFileQueue.push(t.partial),DOM.asynGetPartial(t.partial,Bootstrap.loadPartialIntoTemplate,t.target)):(e=DOM.getHashValue(window.location.href),State.onloadFileQueue.push(e),DOM.asynGetPartial(e,Bootstrap.loadPartialIntoTemplate,State.target))},State.compiledScopes+=e+",",null!=(r=Route.handleRoute(window.location.href))&&(n.isNullOrEmpty(r.partial)||(i=document.getElementById(r.target),l=DOM.getDataAttribute(i,n.IE_DEFAULT_ATTRIB_KEY),n.isNull(i)||n.isNullOrEmpty(l)||i.setAttribute("data-"+n.IE_DEFAULT_ATTRIB_KEY,""),State.onloadFileQueue.push(r.partial),DOM.asynGetPartial(r.partial,Bootstrap.loadPartialIntoTemplate,r.target)));var a=Templar._components.length;for(cName in Templar._components)if("length"!==cName){var o,s=Templar._components[cName];o=function(){var n=this.targetNode,r=document.createElement("div"),i=r.getElementsByTagName("style"),l=document.getElementsByTagName("head")[0];r.innerHTML=this.responseText,n.transclude=r.getElementsByTagName("content").length>0;for(var a=0;a<i.length;a++)0==a?l.appendChild(i[a]):r.removeChild(i[a]);n.templateContent=r.innerHTML,--Templar._components.length<1&&t(e)},n.isNullOrEmpty(s.templateURL)||DOM.asynGetPartial(s.templateURL,o,"",s)}1>a&&t(e)})});